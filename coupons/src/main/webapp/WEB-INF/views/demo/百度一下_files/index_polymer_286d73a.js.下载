B.comm.prefetchSwitch=1==$("#commonBase").data("spa"),window.__sam_async=!0,window.__sam_async_index=!0,window.__sam_async_super=!0,!function(e){function t(){return i[o]=i[o]||e.apply(this,arguments),i[o]}window.B=window.B||{};var i=B.search=B.search||{},o="eventManager";t.apply(this,[])}(function(){function e(e,t){try{e.apply(this,t)}catch(i){window.console&&console.error&&console.error(i)}}function t(t,i,o,n){var r=this;r.hasEvent(t),"pending"==r.events[t].status&&(o&&(r.events[t].status="fulfilled"),r.callbacks[t].forEach(function(t){(!t.execed||n)&&(t.execed=!0,t.func&&"function"==typeof t.func&&(t.immediate?e(t.func,i):setTimeout(function(){e(t.func,i)
},0)))}),r.realize[t]&&r.trigger(r.realize[t]))}var i=!1;try{-1!==(document.cookie||"").indexOf("debug=async")&&(i=!0)}catch(o){}var n=function(){this.callbacks={},this.events={},this.realize={ready:"afterready",load:"afterload",destroy:"afterdestroy"}};return n.prototype.hasEvent=function(e){var t=this;return void 0===t.events[e]?(t.callbacks[e]=[],t.events[e]={status:"pending"},!1):!0},n.prototype.on=function(e,t,i,o){var n=this;n.hasEvent(e),n.callbacks[e].push({func:t,once:i||!1,immediate:o===!1?!1:!0}),"fulfilled"==n.events[e].status&&n.fire(e)
},n.prototype.one=function(e,t,i){this.on(e,t,!0,i)},n.prototype.dispatch=function(e){t.call(this,e,arguments,!1,!0)},n.prototype.trigger=function(e){i&&console.log("trigger",e),t.call(this,e,arguments,!0)},n.prototype.fire=function(t){var i=this;i.callbacks[t].forEach(function(t){t.execed||(t.execed=!0,t.func&&"function"==typeof t.func&&(t.immediate?e(t.func,i.arguments):setTimeout(function(){e(t.func,i.arguments)},0)))})},n.prototype.clone=function(){var e=this,t=new n;t.events=e.events;for(var i in t.events)t.events[i].status="pending";
t.callbacks={};for(var o in e.callbacks)t.callbacks[o]=[],e.callbacks[o].forEach(function(e){e.once||t.callbacks[o].push({func:e.func,execed:!1,immediate:e.immediate})});return t},n}),!function(e){function t(){return i[o]=i[o]||e.apply(this,arguments),i[o]}window.B=window.B||{};var i=B.search=B.search||{},o="Search";t.apply(this,[])}(function(){function e(e){return function(){o[e].apply(o,arguments)}}function t(){r!==!0&&(r=!0,i.onload=function(e){i.one("load",e,!1)},i.init=function(e){i.one("init",e)
},i._fireReady=function(){n.trigger("ready")},i._fireInit=function(){n.trigger("init")})}var i=window.B||{},o=new i.search.eventManager;i.search.zbios=function(e){e&&e.type>=0&&e.type<10&&e.word&&(location.href="//m.baidu.com/s?word="+e.word+"&"+(e.param||""))};var n={on:e("on"),one:e("one"),trigger:e("trigger"),dispatch:e("dispatch"),restoreEvent:function(){o=o.clone()},initEvent:function(){t()}};i.on=n.on,i.one=n.one;var r=!1;return window.__sam_async_super||t(),window.addEventListener("load",function(){n.trigger("load")
},!1),document.addEventListener("DOMContentLoaded",function(){n.trigger("DOMContentLoaded")},!1),n}),define("uiamd/bdbox/base",[],function(){function e(e,t){return a.cleanObj.toString.call(e).slice(8,-1)===t}function t(e){var t=s[e];if(t)return t.exports;throw"module "+e+" is undefined"}function i(e,i){for(var o,n,r=e.split(":"),c=r.pop().split("/"),d=a;o=c.shift();)"bdbox"!==o&&(n=o,c.length&&(d=d[o]=d[o]||{}));var p=s[e]={exports:{}},u=a.isFunction(i)?i.apply(p,[t,p.exports,p,a]):i;u&&(p.exports=u),d[n]=p.exports
}var o=+new Date,n=(o+"").slice(-3),r=navigator.userAgent,a={isBox:/ baiduboxapp\//i.test(r)&&!/ (lite|info) baiduboxapp/.test(r),$isBox:function(){var e=window.navigator||{},t=e.userAgent;return/ baiduboxapp\//i.test(t)&&!/ (lite|info) baiduboxapp/.test(t)},isLiteBox:/ (lite|info) baiduboxapp\//i.test(r),$isLiteBox:function(){var e=window.navigator||{},t=e.userAgent;return/ (lite|info) baiduboxapp\//i.test(t)},isInfoBox:/ info baiduboxapp\//i.test(r),$isInfoBox:function(){var e=window.navigator||{},t=e.userAgent;
return/ info baiduboxapp\//i.test(t)},isIOS:/(iPhone|iPod|iPad)/.test(r),$isIOS:function(){var e=window.navigator||{};return/(iPhone|iPod|iPad)/.test(e.userAgent)},isAndroid:/(Android);?[\s\/]+([\d.]+)?/.test(r),isWin10:function(){var e=navigator.userAgent.match(/Windows Phone ([\d.]+)/);return e&&"10.0"===e[1]?!0:void 0}(),$isAndroid:function(){var e=window.navigator||{};return/(Android);?[\s\/]+([\d.]+)?/.test(e.userAgent)},getId:function(){return n++},emptyArr:[],emptyFn:function(){},cleanObj:{},byId:function(e){return a.isString(e)?document.getElementById(e):e
},toArray:function(e){return a.emptyArr.slice.call(e)},$:function(e,t){return t=t&&1===t.nodeType?t:document,a.toArray(t.querySelectorAll(e))}};"Function,String,Array,Number,RegExp".replace(/[^, ]+/g,function(t){a["is"+t]=function(i){return e(i,t)}}),a.isBoolean=function(e){return e===!0||e===!1},a.isObject=function(e){return"object"==typeof e},a.isUndefined=function(e){return void 0===e},a.isWindow=function(e){return null!=e&&e==e.window},a.isPlainObject=function(e){return a.isObject(e)&&!a.isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype
};var s={};return a.define=i,i("common:bdbox/utils/getVersion",function(e,t,i,o){var n=function(){var e=0;if(window.baiduboxapp_version)e=window.baiduboxapp_version;else if(o.$isBox()){var t,i=navigator.userAgent;(t=/([\d+.]+)_(?:diordna|enohpi)_/.exec(i))?(t=t[1].split("."),e=t.reverse().join(".")):(t=/baiduboxapp\/([\d+.]+)/.exec(i))&&(e=t[1])}return n=function(){return e},e};i.exports=n}),i("common:bdbox/utils/getLiteVersion",function(e,t,i,o){var n=function(){var e=0;if(o.$isLiteBox()){var t,i=navigator.userAgent;
(t=/baiduboxapp\/([\d+.]+)/.exec(i))&&(e=t[1])}return n=function(){return e},e};i.exports=n}),i("common:bdbox/utils/version_compare",function(e,t,i){var o=function(e,t){t+="",e+="";for(var i=e.split("."),o=t.split("."),n=0,r=Math.max(i.length,o.length);r>n;n++){if(i[n]&&!o[n]&&parseInt(i[n])>0||parseInt(i[n])>parseInt(o[n]))return 1;if(o[n]&&!i[n]&&parseInt(o[n])>0||parseInt(i[n])<parseInt(o[n]))return-1}return 0};i.exports=o}),i("common:bdbox/ios/invokeApp",function(e,t,i,o){i.exports=function(e,t,i){if(e&&o.$isBox()){var n=[];
if(o.isFunction(t))i=t;else for(var r in t)n.push(r+"="+t[r]);if(o.isFunction(i)){var a="_bdbox_js_"+o.getId();window[a]=function(){i.apply(window,[].slice.call(arguments,0))},n.push("func="+a)}else i&&n.push("func="+i);n="baiduboxapp://"+e+"?"+n.join("&");var s="_bdbox_ios_jsbridge",c=document.getElementById(s);c?c.src=n:(c=document.createElement("iframe"),c.style.display="none",c.id=s,c.src=n,(document.body||document.getElementsByTagName("body")[0]).appendChild(c))}}}),i("common:bdbox/android/invokeApp",function(e,t,i,o){function n(e,t,i){if(i&&!o.isArray(i)&&(i=Array.prototype.slice.call(arguments,0).slice(2)),window[e]&&window[e][t]){var n=window[e][t].apply(window[e],i);
return{error:0,result:n,__from:"js"}}var d=s();if(a(d,4.8)>=0||a(c(),2)>=0){var p=r(e,t,i);return p=p?JSON.parse(p):{},p.__from="app",p}if("4.7.1"===d||"4.7"==d){var u=r(e,t,i);return{error:0,result:u,__from:"app4.7"}}return{error:200}}function r(e,t,i){if(!o.$isBox()&&!o.$isLiteBox())return{error:201};if(!o.$isAndroid())return{error:202};var n={obj:e,func:t,args:i?i:[]};try{return window.prompt("BdboxApp:"+JSON.stringify(n))}catch(r){return{error:201}}}var a=e("common:bdbox/utils/version_compare"),s=e("common:bdbox/utils/getVersion"),c=e("common:bdbox/utils/getLiteVersion");
i.exports=n}),i("common:bdbox/android/invokeLiteApp",function(e,t,i,o){function n(e,t,i){if(i&&!o.isArray(i)&&(i=Array.prototype.slice.call(arguments,0).slice(2)),!o.$isLiteBox()||!o.$isAndroid())return{error:201};var n=r(e,t,i);return n=n?JSON.parse(n):{},n.__from="liteApp",n}function r(e,t,i){var o={obj:e,func:t,args:i?i:[]};try{return window.prompt("BdboxApp:"+JSON.stringify(o))}catch(n){return{error:201}}}i.exports=n}),i("common:bdbox/invoke/newInvoke",function(e,t,i,o){var n=e("common:bdbox/utils/version_compare"),r=e("common:bdbox/utils/getVersion");
i.exports=function(e,t,i){if(e&&(o.$isBox()||o.$isLiteBox())){var a,s=[];if(o.isFunction(t))i=t;else for(var c in t)s.push(c+"="+t[c]);if(o.isFunction(i)){var d="_bdbox_js_"+o.getId();window[d]=function(){i.apply(window,[].slice.call(arguments,0))},s.push("callback="+d)}else i&&s.push("callback="+i);a="baiduboxapp://"+e+"?"+s.join("&");var p=r(),u=window.Bdbox_android_jsbridge;if(o.$isAndroid()&&n(p,"9.0")>=0)return void(u&&u.dispatch?u.dispatch(a):window.prompt("BdboxApp:"+JSON.stringify({obj:"Bdbox_android_jsbridge",func:"dispatch",args:[a]})));
var l=document.createElement("iframe");l.style.display="none",l.src=a;var m=document.body||document.getElementsByTagName("body")[0];m.appendChild(l),setTimeout(function(){m.removeChild(l),l=null},0)}}}),i("common:bdbox/utils/detect",function(e,t,i,o){function n(e){var t={name:"unknown",version:0};this===window||this.os||(this.os=t),e=e||navigator.userAgent;var i={Weibo:/weibo/i,Wechat:/micromessenger\//i,QQ:/QQ\//};for(var o in i)i.hasOwnProperty(o)&&(t["is"+o]=i[o].test(e));t.isUC=e.match(/UC/)||window.ucweb||window.ucbrowser;
var n=e.match(/Windows Phone ([\d.]+)/);if(n)return t.win10=!0,t.version=n[1],t.name="win10",t;var r=e.match(/(Android);?\s+([\d.]+)?/);if(r)return t.android=!0,t.version=r[2],t.name="android",t;var a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/);return c&&!s?(t.ios=t.iphone=!0,t.version=c[2].replace(/_/g,"."),t.name="ios",t):a?(t.ios=t.ipad=!0,t.name="ios",t.version=a[2].replace(/_/g,"."),t):s?(t.name="ios",t.ios=t.ipod=!0,t.version=s[3]?s[3].replace(/_/g,"."):null,t):t
}n.apply(o),i.exports=n}),i("common:bdbox/utils/ready",function(e,t,i){function o(){r.forEach(function(e){e()}),r.length=0,a=!0}function n(e){"function"==typeof e&&(a?e():r.push(e))}var r=[],a=!1;"complete,loaded,interactive".indexOf(document.readyState)>-1&&document.body?o():document.addEventListener("DOMContentLoaded",o,!1),i.exports=n}),i("common:bdbox/schema",function(e,t,i,o){function n(e,t){if(!e)return void t(!0);if(t=t||o.emptyFn,!o.$isBox()&&o.$isIOS()&&s(a.version,"9.0")>=0)return void c(function(){r(e,t)
});var i=Date.now(),n=document.createElement("IFRAME");n.src=e,n.style.position="absolute",n.style.left="-2000px",n.style.top="-1000px",n.style.width="1px",n.style.height="1px",n.style.webkitTransition="all 0.9s",n.style.transition="all 0.9s",document.body.appendChild(n);var d=function(){document.body.removeChild(n),t(Date.now()-i<1500?!0:!1)};n.addEventListener("webkitTransitionEnd",d,!1),n.addEventListener("transitionEnd",d,!1),setTimeout(function(){n.style.left="-1000px"},20)}function r(e,t){location.href=e,d&&clearTimeout(d),d=setTimeout(function(){t(!0)
},3e3)}var a=e("common:bdbox/utils/detect")(),s=e("common:bdbox/utils/version_compare"),c=e("common:bdbox/utils/ready"),d=null;i.exports=n}),i("common:bdbox/extend",function(e,t,i,o){function n(e,t,i){for(var o in t)i&&(r(t[o])||a(t[o]))?(r(t[o])&&!r(e[o])&&(e[o]={}),a(t[o])&&!a(e[o])&&(e[o]=[]),n(e[o],t[o],i)):c(t[o])||(e[o]=t[o])}var r=o.isPlainObject,a=o.isArray,s=o.isBoolean,c=o.isUndefined;i.exports=function(e){var t,i=o.emptyArr.slice.call(arguments,1);return s(e)&&(t=e,e=i.shift()),i.forEach(function(i){n(e,i,t)
}),e}}),i("common:bdbox/utils/queryToJson",function(e,t,i){i.exports=function(e){try{e=e?decodeURIComponent(e):""}catch(t){e=""}var i=e.split("?"),o=i[1]?i[1]:i[0],n=o.split("&"),r={};return n.forEach(function(e){if(e=e.split("="),e[0].length>0){var t="";try{t=decodeURIComponent(e[1])||""}catch(i){}r[e[0]]=t}}),r}}),a.version_compare=a.utils.version_compare,a.getVersion=a.utils.getVersion,a.getLiteVersion=a.utils.getLiteVersion,a.o2o=a.utils.o2o,a}),define("uiamd/bdbox/follow",["uiamd/bdbox/base"],function(e){var t=e.define;
return t("common:bdbox/ios/open",function(e,t,i,o){function n(e,t){if(!e)return void(o.isFunction(t)&&t(!1));var i=Date.now(),n=document.createElement("IFRAME");n.src=e,n.style.display="none",n.style.position="absolute",n.style.left="-2000px",n.style.top="-1000px",n.style.width="1px",n.style.height="1px",n.style.webkitTransition="all 1s",n.style.transition="all 1s",document.body.appendChild(n),setTimeout(function(){var e=function(){document.body.removeChild(n),t(Date.now()-i<1500?!0:!1)};n.addEventListener("webkitTransitionEnd",e,!1),n.addEventListener("transitionEnd",e,!1),n.style.left="-10px"
},0)}i.exports=n}),t("common:bdbox/client/toast",function(e,t,i,o){var n=e("common:bdbox/utils/getVersion"),r=e("common:bdbox/utils/version_compare"),a="Bdbox_android_utils",s=e("common:bdbox/ios/invokeApp"),c=e("common:bdbox/android/invokeApp"),d=function(e){if(o.$isIOS()){if(o.$isBox()&&r(n(),"6.0")<0)return;s("utils",{action:"toast",string:e,minver:"6.0.0.0"})}else{if(o.$isBox()&&r(n(),"4.6")<0)return;c(a,"toast",[e])}};i.exports=d}),t("common:bdbox/client/login",function(e,t,i,o){var n=e("common:bdbox/utils/getVersion"),r=e("common:bdbox/utils/version_compare"),a="Bdbox_android_account",s=e("common:bdbox/ios/invokeApp"),c=e("common:bdbox/android/invokeApp"),d=function(e){var t,i={callback:"",url:location.href,tpl:"",login_type:"",third_login:"0"};
for(t in i)e.hasOwnProperty(t)||(e[t]=i[t]);if(o.isBox&&r(n(),"5.5")>=0||o.$isLiteBox())o.$isIOS()?(e.func=e.callback,delete e.callback,e=JSON.stringify(e),s("account",{action:"logindialog",params:encodeURIComponent(e),minver:"5.5.0.0"})):c(a,"loginDialog",[JSON.stringify(e),e.callback]);else{var d="http://wappass.baidu.com/?adapter=1&regLink=1";"sms"===e.login_type&&(d+="&sms=1"),e.subpro&&(d+="&subpro="+e.subpro),""!=e.tpl&&(d+="&tpl="+e.tpl),window.location.href=d+"&u="+encodeURIComponent(e.url)
}};i.exports=d}),t("common:bdbox/utils/jsonToQuery",function(e,t,i,o){i.exports=function(e){if(o.isString(e))return e;var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")}}),t("common:bdbox/io/loadJS",function(e,t,i,o){function n(e,t,i){var n,c,d,p=document.createElement("script");o.isString(e)?(n=e,o.isFunction(t)&&(i=t,t=null)):(n=e.url,t=e.data,i=e.success,c=e.error||o.emptyFn,d=e.timeout),o.isObject(t)&&(t=a(t)),t&&(n+=(-1===n.indexOf("?")?"?":"&")+t),n=n.replace(/[&?]{1,2}/,"?");var u;
/=\?/.test(n)&&(u="_box_jsonp"+o.getId(),n=n.replace(/=\?/,"="+u));var l=r();d=d||2e4,p.type="text/javascript",p.src=n;var m,h=!0,f=function(e){u&&(e?window[u]=s:delete window[u]),m&&clearTimeout(m),p.onload=p.onreadystatechange=p.onerror=null,p=null},b=function(){!p||p.readyState&&!/loaded|complete/.test(p.readyState)||(f(),h&&o.isFunction(i)&&i.apply(null,o.toArray(arguments)),h=!1)},g=function(e){f(),h&&c(e),h=!1};u&&(window[u]=b),m=setTimeout(function(){f(!0),h&&c("timeout"),h=!1},d),p.onload=p.onreadystatechange=p.onerror=b,p.onerror=g,l.appendChild(p)
}function r(){return document.head||document.getElementsByTagName("head")[0]||document.documentElement}var a=e("common:bdbox/utils/jsonToQuery"),s=o.emptyFn;i.exports=n}),t("common:bdbox/each",function(e,t,i){function o(e){var t;return null==e?t=String(e):(t=Object.prototype.toString.call(e).toLowerCase(),t=t.substring(8,t.length-1)),t}i.exports=function(e,t,i){if("object"==typeof e){var n,r,a=o(e);if(i=i||e,"array"===a||"arguments"===a||"nodelist"===a){for(n=0,r=e.length;r>n;n++)if(t.call(i,e[n],n,e)===!1)return
}else for(n in e)if(e.hasOwnProperty(n)&&t.call(i,e[n],n,e)===!1)return}}}),t("common:bdbox/clone",function(e,t,i){var o=Object.prototype.toString,n=function(e,t,i){var o=0;for(var n in e)if(e.hasOwnProperty(n))if(i)t[n]=e[n];else if(t(n,e[n],o++))break},r=function(e){var t;switch(o.call(e)){case"[object Object]":t={},n(e,function(e,i){t[e]=r(i)});break;case"[object Array]":t=[],e.forEach(function(e){t.push(r(e))});break;default:t=e}return t};i.exports=r}),t("common:bdbox/monitor",function(e,t,i,o){var n=encodeURIComponent,r=function(e,t){e+=e.indexOf("?")<0?"?":"&",this.url=e,this.options=t
};r.prototype.report=function(e,t){var i=!1;e=e||"";var r=new Image(1,1),a=[];if(o.isObject(e)){for(var s in e)a.push(s+"="+n(String(e[s])));e=a.join("&")}var c="_box_mt"+o.getId();window[c]=r,r.onload=r.onerror=r.onabort=function(){t&&"function"==typeof t&&!i&&(i=!0,t()),r.onload=r.onerror=r.onabort=null,window[c]=r=null};var d=this.url+e;return o.isFunction(this.options.customHandler)&&(d=this.options.customHandler(d)),r.src=d+"&_rnd="+Math.floor(2147483648*Math.random()),setTimeout(function(){t&&"function"==typeof t&&!i&&(i=!0,t())
},100),this},r.prototype.main=function(e,t){return e&&o.isFunction(this[e])&&this[e].apply(this,o.toArray(t||[])),this},i.exports=function(e,t){return new r(e,t)}}),t("common:bdbox/monitor/multilog",function(e,t,i,o){var n=e("common:bdbox/monitor"),r=e("common:bdbox/extend"),a=e("common:bdbox/utils/queryToJson"),s=e("common:bdbox/utils/getVersion"),c=e("common:bdbox/clone"),d=a(location.search),p=navigator.userAgent,u=window.location.protocol;"http:"!==u&&(u="https:");var l=u+"//m.baidu.com/tcbox",m=encodeURIComponent,h=function(e){var t=this;
this.CUSTOM_ARG={service:"bdbox",action:"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{ref:d.ref||"",gmv:d.vmgdb||"",source:d.from||d.ref||"",boxVersion:s(),boxPlatform:p.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}},d.uid&&d.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach(function(e){d[e]&&(t.CUSTOM_ARG[e]=d[e])}),e&&(this.CUSTOM_ARG.data.cateid=e),this.tmpArg={},this.options={},this.options.customHandler=function(e){var i=[];
if(t.tmpArg)for(var n in t.tmpArg)if(t.tmpArg.hasOwnProperty(n)){var r=t.tmpArg[n];o.isPlainObject(r)&&(r=JSON.stringify(r)),i.push(n+"="+m(r))}return i.length&&(e+=i.join("&")),e}};h.prototype=n(l),h.prototype.pv=function(e,t){this.tmpArg=c(this.CUSTOM_ARG);var i=this.tmpArg.data;i.actionid="1";var o={};return o.url=e||location.href,t&&(o.u=t),i.actiondata=r(i.actiondata,o),this.tmpArg.data=i,this.report()},h.prototype.event=function(e,t,i){if(!e)throw"monitor.tc.event need a evtName";if(o.isPlainObject(t)&&!i){var n={evtName:e};
for(var a in t)n[a]=t[a]}else var n={evtName:e,evtType:t||"",evtTag:i||""};this.tmpArg=c(this.CUSTOM_ARG);var s=this.tmpArg.data;return s.actionid="2",s.actiondata=r(s.actiondata,n),this.tmpArg.data=s,this.report()},i.exports=function(e){return new h(e)}}),t("common:bdbox/client/o2o",function(e,t,i,o){var n=e("common:bdbox/android/invokeApp"),r=e("common:bdbox/ios/invokeApp"),a=encodeURIComponent,s=e("common:bdbox/each"),c=o.$isAndroid()?function(e,t){o.isObject(e)&&(t=e,e=e.url,delete t.url);var i=["S.bdsb_light_start_url="+a(e)];
if(o.isObject(t)){var r=t.min_v;delete t.min_v;var c={color:"i.extra_actionbar_color_id",appid:"S.bdsb_wallet_appid"};s(t,function(e,t){"color"===t&&(e=4278190080|parseInt("0x"+e)),t=c[t]||t,i.push(t+"="+e)})}i=i.join(";");var d={intent:"intent:#Intent;"+i+";end",min_v:r&&""!=r?r:"16783629",mode:"0"};t&&t.component&&""!=t.component||(d["class"]="com.baidu.searchbox.wallet.WalletServiceActivity"),n("Bdbox_android_utils","command",[JSON.stringify(d)])}:function(e,t){o.isObject(e)&&(t=e,e=e.url,delete t.url);
var i={openurl:a(e),minver:"5.3.0.0",isla:0,opentype:1,append:0,rbtnstyle:2};if(o.isObject(t)){var n={color:"barcolor"};s(t,function(e,t){t=n[t]||t,i[t]=e})}i.appid&&(i.isla=1),r("easybrowse",i)};i.exports=c}),t("common:bdbox/subscribe/isub",function(e,t,i,o){var n,r,a=o,s=e("common:bdbox/utils/version_compare"),c=e("common:bdbox/utils/getVersion"),d=e("common:bdbox/client/o2o"),p=e("common:bdbox/ios/open"),u=e("common:bdbox/android/invokeApp"),l=e("common:bdbox/client/toast"),m=e("common:bdbox/client/login"),h=e("common:bdbox/monitor/multilog"),f=e("common:bdbox/io/loadJS"),b=e("common:bdbox/utils/jsonToQuery"),g=e("common:bdbox/utils/queryToJson"),v=e("common:bdbox/invoke/newInvoke"),w=e("common:bdbox/ios/invokeApp"),y=h(18),x=function(e,t){this.id=e,this.toastBool=null,this.toastTransition=null,this.needUI=t&&t.needUI||!0,this.needUI&&this.createDom(),"undefined"==typeof t.onLine&&(t.onLine=1),this.ops=t||{},this.ua=this.getUa(),this.isNew=a.isBox&&s(c(),"7.7.0")>=0,this.isNew90=a.isBox&&s(c(),"9.0.0")>=0,this.ops.sfrom=this.ua,!this.ops.noPv&&y.pv("__subscribeComponentsPv__",this.ops),location.port&&!t.onLine?(n="",r=""):(n="https://mbd.baidu.com",r="https://ext.baidu.com")
},_=x.prototype;_.createDom=function(){var e=this.id,t=document.createElement("div");t.className="subscribe-toast subscribe-toast-tips",t.id="toast-text-"+e;var i=document.createElement("div");i.className="subscribe-tips-context",i.innerText="关注失败",t.appendChild(i),this.$toastOne=t;var o=document.createElement("div");o.className="subscribe-toast subscribe-toast-click",o.id="toast-click-"+e;var n=document.createElement("div");if(n.className="subscribe-click-container",n.innerHTML='<div class="subscribe-click-context">关注成功，请到“<span class="subscribe-click-text2">首页-关注</span>”查看</div><div class="subscribe-click-button" ontouchstart="">去查看</div>',o.appendChild(n),this.$toastTwo=o,!document.getElementById("subcribe_style")){var r=".subscribe{box-sizing:border-box;-webkit-box-sizing:border-box}.subscribe-toast-tips{box-sizing:border-box;-webkit-box-sizing:border-box;position:fixed;top:50%;margin-top:-25px;height:50px;width:100%;text-align:center;z-index:200;transition:opacity .3s;-webkit-transition:opacity .3s;opacity:0}.subscribe-toast-tips.subscribe-active{opacity:1}.subscribe-tips-context{box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;width:auto;margin:0 auto;height:50px;min-width:100px;padding:0 17px;font:18px/50px Arial,Helvetica,sans-serif;color:#fff;background-color:rgba(0,0,0,0.7);border-radius:2px}@media screen and (max-width:320px){.subscribe-tips-context{font:16px/50px Arial,Helvetica,sans-serif}}.subscribe-toast-click{box-sizing:border-box;-webkit-box-sizing:border-box;position:fixed;bottom:36px;margin-top:-25px;height:50px;width:100%;z-index:200;text-align:center;transition:opacity .3s;-webkit-transition:opacity .3s;opacity:0}.subscribe-toast-click.subscribe-active{opacity:1}.subscribe-click-container{box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;width:92%;margin:0 auto;height:50px;min-width:100px;padding:0 17px;background-color:rgba(0,0,0,0.7);border-radius:2px;color:#fff}@media screen and (max-width:320px){.subscribe-click-container{padding:0 10px}}.subscribe-click-context{display:inline-block;vertical-align:top;float:left;box-sizing:border-box;-webkit-box-sizing:border-box;font:16px/50px Arial,Helvetica,sans-serif;width:76%;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:320px){.subscribe-click-context{font:14px/50px Arial,Helvetica,sans-serif}}.subscribe-click-button{float:right;box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;vertical-align:top;margin-top:11px;width:20%;height:28px;border-radius:2px;font:14px/28px Arial,Helvetica,sans-serif;background-color:#3c76ff;text-align:center}@media screen and (max-width:320px){.subscribe-click-button{width:60px;font:12px/28px Arial,Helvetica,sans-serif}}.subscribe-click-button:active{background-color:#3970f2}",a=document.createElement("style");
a.id="subcribe_style",a.rel="stylesheet",a.type="text/css",a.innerHTML=r,document.head.appendChild(a)}},_.relateAPI=function(e,t,i){if(!e||"object"!=typeof e)throw new Error(e.type&&e.sfrom&&e.third_id&&e.sort_index?t&&"function"!=typeof t?"callback must be a function":"params error":"missing params");var o=a.isArray(e.third_id)?e.third_id.join(","):e.third_id,n=this.isNew,s={type:e.type,sfrom:e.sfrom,third_id:o,store:n?"uid_cuid":"uid"},c=r+"/api/subscribe/v1/relation/get?callback=?&"+b(s),d=function(e){t&&t(e)
},p=function(e){i&&i(e)};f({url:c,success:d,error:p})},_.toast=function(e){if(!this.isPlainObject(e)||this.isEmptyObject(e))throw new Error("params error,config is not a json");var t=e.type||null,i=e.callback||null,o=e.url||null,n=e.text||null,r=this,s=this.isNew;if(!t||"string"!=typeof t)throw new Error("params error");var c=document.body,d=c.querySelectorAll(".subscribe-toast");if(this.toastBool&&(clearTimeout(this.toastBool),clearTimeout(this.toastTransition)),d.length)for(var p=0;p<d.length;p++)d[p].parentNode.removeChild(d[p]),r.removeClass(d[p],"subscribe-active");
switch(t){case"tips":if(y.event("subComponents","interface",{isaladin:this.ops.isaladin?"1":"0",ua:this.ua,pos:"tips",source:this.ops.type?this.ops.type:"others"}),a.isBox)return l(n);c.appendChild(r.$toastOne);var u=document.querySelector("#toast-text-"+r.id);this.toastTransition=setTimeout(function(){n&&(u.querySelector(".subscribe-tips-context").innerText=n),u.className="subscribe-toast subscribe-toast-tips subscribe-active"},10),this.toastBool=setTimeout(function(){try{r.$toastOne.parentNode.removeChild(r.$toastOne)
}catch(e){return!1}},3e3);break;case"click":if(y.event("subComponents","interface",{isaladin:this.ops.isaladin?"1":"0",ua:this.ua,pos:"click",source:this.ops.type?this.ops.type:"others"}),a.isLiteBox)return this.toast({type:"tips",text:"关注成功，请到“首页-关注”查看"});if(this.isNew90)return this.toast({type:"tips",text:e.text?e.text:"关注成功"});var m=s?"关注":"我的关注",h=a.$isBox()?m:"首页-关注";r.$toastTwo.querySelector(".subscribe-click-text2").innerText=h,c.appendChild(r.$toastTwo),!s&&a.$isBox()?(r.$toastTwo.style.bottom="100px",r.$toastTwo.querySelector(".subscribe-click-button").style.display="none"):a.isLiteBox&&(r.$toastTwo.querySelector(".subscribe-click-button").style.display="none"),this.toastTransition=setTimeout(function(){r.addClass(r.$toastTwo,"subscribe-active")
},10),this.toastBool=setTimeout(function(){try{r.$toastTwo.parentNode.removeChild(r.$toastTwo)}catch(e){return!1}},3e3);var f=document.querySelector("#toast-click-"+r.id+" .subscribe-click-button");f.onclick=null,setTimeout(function(){f.onclick=function(){r.$toastTwo.parentNode.removeChild(r.$toastTwo),"function"==typeof i?i&&i():r.toLandingPage(o)}},10)}return this},_.toLandingPage=function(e,t){if(y.event("subComponents","interface",{isaladin:this.ops.isaladin?"1":"0",ua:this.ua,pos:"toLanding",from:t?"button":"toast",source:this.ops.type?this.ops.type:"others"}),e){var i=a.$isIOS()?{newbrowser:1}:{};
a.$isBox()?d(e,i):window.location.href=e}else if(a.$isBox()&&s(c(),"7.6.0")>=0){if(a.isIOS){var o={mode:2,url:"baiduboxapp://apppage?action=openPage&params=%7b%22pageid%22%3a%22mysubscription%22%2c%22url%22%3a%22https%3a%2f%2fmbd.baidu.com%2fwebpage%3faction%3dicard%26type%3dsubscribe%22%2c%22titile%22%3a%22%22%7d",minver:"7.6.0"};p(o.url,function(e){e&&toast("网络出错，请稍候重新连接")})}else if(a.$isAndroid()){var o={mode:"7",commands:[{mode:"6",intent:"intent:#Intent;S.rn_search_box_key=6;S.rn_bundle_id=box.rnplugin.myattention;S.rn_component_name=MyAttention;end","class":"com.baidu.searchbox.reactnative.RNSearchBoxMainActivity",min_v:"25167488"},{mode:"0",intent:"intent:#Intent;S.user_sub_center_load_url=/webpage?action=icard&type=subscribe;B.launch_center=true;B.user_sub_center_search_enable=false;B.create_menu_key=false;end","class":"com.baidu.searchbox.xsearch.UserSubscribeCenterActivity",dyna_url_key:"user_sub_center_load_url",http_style:!0,min_v:"24381184"}],min_v:"24381184"};
u("Bdbox_android_utils","command",[JSON.stringify(o)])}}else{var r=n+"/webpage?action=icard&type=subscribe",l=g(window.location.href);l.channel&&"wise_home"===l.channel&&(r+="&channel=wise_home"),window.location.href=r}},_.subscribe=function(e,t,i,n){var d=this,p=this.isNew;if(!e||"object"!=typeof e)throw new Error(e.type&&e.op_type&&e.third_id?t&&"function"!=typeof t?"callback must be a function":"params error":"missing params");y.event("subComponents","interface",{isaladin:this.ops.isaladin?"1":"0",ua:this.ua,type:e.op_type,pos:"subscribe",source:this.ops.type?this.ops.type:"others"});
var l={},m=function(e){e.errno||(e={errno:500,errmsg:"request failed,uncaught error"}),i?i(e):800200===e.errno?d.toast({type:"tips",text:e.errmsg||"关注失败"}):1e4!==e.errno&&d.toast({type:"tips"}),l={}},h=r+"/api/subscribe/v1/relation/status?callback=?",g={type:e.type,op_type:e.op_type?e.op_type:"add",third_id:e.third_id,sfrom:e.sfrom?e.sfrom:"sbox",source:e.source?e.source:"mysub_h5",store:p||a.isLiteBox?"uid_cuid":"uid",sid:e.sid?e.sid:"",position:e.position||""};e.ext&&this.isPlainObject(e.ext)&&(g.ext=encodeURIComponent(JSON.stringify(e.ext)));
var x=r+"/api/subscribe/v1/relation/receive?callback=?&"+b(g),_=function(e){var t=e.errno,i=e.data.isLogin;0===t?i||a.$isBox()||a.isLiteBox?i||!a.$isBox()||p?f({url:x,success:k,error:m}):(l={errno:10010,errmsg:e.errmsg||""},m(l),d.toLogin()):n?n():(l={errno:1e4,errmsg:e.errmsg||""},m(l),window.location.href="http://wappass.baidu.com/passport/login?u="+encodeURIComponent(window.location.href)):(l={errno:10020,errmsg:e.errmsg||""},m(l))},S=function(e){if(!o.isBox&&!o.isLiteBox)return!1;e=o.isObject(e)?e:{};
var t=e.data||{},i=e.callback||function(){},n="__boxjs_utils_webStorage_"+o.getId();window[n]=function(e){try{i(o.isIOS?JSON.parse(e):e)}catch(t){return!1}},o.isIOS?w("utils",{action:"webStorage",params:JSON.stringify(t)},n):u("Bdbox_android_utils","webStorage",[JSON.stringify(t),n])},k=function(i){var o=i.errno;0===o?(y.event("subComponents","interface",{isaladin:d.ops.isaladin?"1":"0",ua:d.ua,status:"success",type:e.op_type,pos:"subscribe",source:d.ops.type?d.ops.type:"others"}),s(c(),"10.0")>=0&&(S({data:{action:"set",key:"follow_status_"+g.third_id,data:{data:[{is_follow:"add"===g.op_type?"1":"0"}]}},callback:function(){}}),v("v5/datachannel/sendbroadcast",{action:"com.baidu.channel.foundation.followchanged",data:JSON.stringify({data:[{type:g.type,third_id:encodeURIComponent(g.third_id),is_follow:"add"===g.op_type?"1":"0",position:g.position}]})},function(){})),t&&t(i)):m(i)
};f({url:h,success:_,error:m})},_.toLogin=function(){if(y.event("subComponents","interface",{isaladin:this.ops.isaladin?"1":"0",ua:this.ua,pos:"toLogin",source:this.ops.type?this.ops.type:"others"}),a.$isBox()){if(a.$isBox()){var e={target:"",params:{subpro:"webpage_card",tpl:"webpage_card"},callbackName:"",callback:function(e){e||location.reload(1)},doLogin:function(){this.callbackName&&delete window[this.callbackName],this.callbackName="_LOGIN_CALLBACK_"+a.getId(),window[this.callbackName]=this.callback,this.params.callback="window."+this.callbackName,m(this.params)
}};e.doLogin()}}else window.location.href="http://wappass.baidu.com/passport/login?u="+encodeURIComponent(window.location.href)},_.showDialog=function(e,t,i,o){return this.subscribe(t,i,o)},_.getUa=function(){var e=navigator.userAgent.toLowerCase(),t=null;switch(!0){case a.$isBox():t="bdbox";break;case/micromessenger/i.test(e):t="wechat";break;case/baidubrowser/i.test(e):t="baidubrowser";break;case/ucbrowser/i.test(e):t="ucbrowser";break;default:t="others"}return t},_.hasClass=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))
},_.addClass=function(e,t){this.hasClass(e,t)||(e.className=this.trim(e.className)+" "+t)},_.removeClass=function(e,t){if(this.hasClass(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}},_.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},_.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},_.isPlainObject=function(e){var t="object"==typeof e&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length;return t},i.exports=x}),e.isub=e.subscribe.isub,e.isub
}),define("uiamd/bdbox/util",["uiamd/bdbox/base"],function(e){var t=(navigator.userAgent.indexOf("baiduboxapp")>-1?!0:!1,{fullScreen:function(t,i){if(e){if(e.version_compare(e.getVersion(),"7.5")<0)return!1;var o={fullscreen:1,disablerefresh:i?0:1},n="callback";t===!1&&(o={fullscreen:0,disablerefresh:i?1:0}),o=JSON.stringify(o),e.isIOS?e.ios.invokeApp("searchFrame",{action:"config",params:encodeURIComponent(o),minver:"7.5.0.0"},n):e.android&&e.android.invokeApp("Bdbox_android_searchFrame","config",[o])
}},setSearchIdToBox:function(){e&&e.isBox&&(e.isIOS?e.ios.invokeApp("v5/browser/setSearchid",{upgrade:0,searchid:page.comm.lid||0}):e.android&&window._flyflowNative&&window._flyflowNative.exec&&window._flyflowNative.exec("bd_wise","onMessage",JSON.stringify({type:2,searchid:page.comm.lid}),null))},disableRefresh:function(t){if(e){if(e.version_compare(e.getVersion(),"7.5")<0)return!1;var i={disablerefresh:t?1:0};i=JSON.stringify(i),e.isIOS?e.ios.invokeApp("searchFrame",{action:"config",params:encodeURIComponent(i),minver:"7.5.0.0"},"callback"):e.android&&e.android.invokeApp("Bdbox_android_searchFrame","config",[i])
}},sendLogByBox:function(t,i){if(i&&t){var o=t+"&tcspd=1";return e&&e.isBox&&e.version_compare(e.getVersion(),"8.6")>=0?(require(["modules/invoke/callback"],function(n){n.regist("onLogSuccess",function(e){window.location.href=!e||e.status&&"0"!==e.status?t:i}),e.isIOS?e.ios.invokeApp("v7/browser/setTcStatisticData",{upgrade:0,url:encodeURIComponent(o),callback:"onLogSuccess"}):e.android&&e.android.invokeApp("Bdbox_android_tc","setTcStatisticData",[o,"onLogSuccess"])}),!0):void 0}}});return t}),define("utils/cookie",["require"],function(){return{cookie:function(e,t,i){var o,n,r,a;
return 0==arguments.length?document.cookie:arguments.length>1&&"[object Object]"!==String(t)?(i=i||{},(null===t||void 0===t)&&(i.expires=-1),"number"==typeof i.expires&&(o=i.expires,n=i.expires=new Date,n.setTime(n.getTime()+o)),t=String(t),document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=t||{},a=i.raw?function(e){return e}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(r[1]):null)
}}}),define("utils/storage",["require"],function(){var e=function(e){var t={};try{window[e].setItem("_t",1),window[e].removeItem("_t"),t.enabled=!0}catch(i){t.enabled=!1}if(!t.enabled)return t.getObj=t.getObjItem=t.setObj=t.setObjItem=t.getItem=t.get=t.key=function(){return null},t.updateObj=t.updateObjItem=t.setItem=t.set=t.removeItem=t.remove=t.clear=function(){},t.length=function(){return 0},t.keys=function(){return[]},t;var o=window[e];return t.getItem=function(e){return o.getItem(e)},t.setItem=function(e,t){o.setItem(e,t)
},t.removeItem=function(e){o.removeItem(e)},t.getObjItem=function(e,t){var i=this.getItem(e),o=null;try{o=JSON.parse(i),t&&(o=o[t])}catch(n){}finally{void 0===o&&(o=null)}return o},t.setObjItem=function(e,t){this.setItem(e,JSON.stringify(t))},t.updateObjItem=function(e,t,i){var o=this.getObjItem(e);o[t]=i,this.setObjItem(e,o)},t.get=function(e,i,o){var n=[e,i,o].join("_");return t.getItem(n)},t.set=function(e,i,o,n){var r=[e,i,o].join("_");t.setItem(r,n)},t.remove=function(e,i,o){var n=[e,i,o].join("_");
t.removeItem(n)},t.getObj=function(e,t,i,o){var n=[e,t,i].join("_");return this.getObjItem(n,o)},t.setObj=function(e,t,i,o){this.setObjItem([e,t,i].join("_"),o)},t.updateObj=function(e,t,i,o,n){this.updateObjItem([e,t,i].join("_"),o,n)},t.keys=function(e,t){var i,n=!1;2==arguments.length&&(i=[e,t].join("_"),n=new RegExp("^"+i));for(var r=[],a=0,s=o.length;s>a;++a)i=o.key(a),(!n||i.match(n))&&r.push(i);return r},t.clear=function(){o.clear()},t.length=function(){return o.length},t.key=function(e){return o.key(e)
},t};return{ls:e("localStorage"),ss:e("sessionStorage")}}),define("utils/event_emitter",["require"],function(){function e(){this.events={}}function t(e){s[e]=1}function i(){s={}}function o(e,t){a[t]||(a[t]=[]),a[t].push(e)}function n(){return this.data={},this.listeners={},this.length=0,this}var r=e.prototype,a={},s={};return r.on=function(e,t,i){if("string"==typeof e&&!("function"!=typeof t||i&&i.name&&"string"!=typeof i.name)){i=i||{};var o=this.getEvent(e),n=o.listeners;o.length+=1;var r=i.name||o.length+"";
n[r]={fn:t,name:r,doAfter:i.doAfter||"",once:i.once||!1}}},r.one=function(e,t,i){i=i||{},i.once=!0,this.on(e,t,i)},r.off=function(e,t){var i=this.events[e];if(i){var o=i.listeners;if("string"==typeof t)return void(o[t]&&delete o[t]);if("function"==typeof t)for(var n in o)o.hasOwnProperty(n)&&o[n].fn===t&&delete o[n]}},r.exec=function(e,i,o,n){var r;try{if(o.fn.call(i,n||{}),o.once===!0&&this.off(e,o.fn),t(o.name),r=a[o.name]){for(var s=0,c=r.length;c>s;s++)this.exec(e,i,r[s],n);delete a[o.name]}}catch(d){}},r.trigger=function(e,t){var n=this.events[e];
if(n){var r=n.listeners,c=null;for(var d in r)r.hasOwnProperty(d)&&(c=r[d],1!==s[c.doAfter]&&c.doAfter&&"string"==typeof c.doAfter?o(c,c.doAfter):this.exec(e,n,c,t));var p;for(d in a)if(a.hasOwnProperty(d)){p=a[d];for(var u=0,l=p.length;l>u;u++)this.exec(e,n,p[u],t);delete a[d]}i()}},r.getEvent=function(e){return void 0===this.events[e]&&(this.events[e]=new n),this.events[e]},n.prototype.getData=function(){return this.data},n.prototype.setData=function(e,t){var i=this.data;return"string"==typeof e&&void 0!==t?void(i[e]=t):void("[object Object]"===String(e)&&(i=$.extend(!0,i,e)))
},e}),require(["utils/cookie"],function(e){page.utils=page.utils||{},page.utils.cookie=e.cookie,B.cookie=e.cookie}),require(["utils/event_emitter"],function(e){page.event=new e}),require(["utils/storage"],function(e){page.utils=page.utils||{},page.utils.ls=e.ls,page.utils.ss=e.ss,B.ls=e.ls,B.ss=e.ss}),define("utils/cookie",["require"],function(){return{cookie:function(e,t,i){var o,n,r,a;return 0==arguments.length?document.cookie:arguments.length>1&&"[object Object]"!==String(t)?(i=i||{},(null===t||void 0===t)&&(i.expires=-1),"number"==typeof i.expires&&(o=i.expires,n=i.expires=new Date,n.setTime(n.getTime()+o)),t=String(t),document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=t||{},a=i.raw?function(e){return e
}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(r[1]):null)}}}),define("search/param",["require"],function(){function e(e,t){if(this.params={},!t){var i=i||$(".se-form");if(i.length>1&&(i=i.eq(0)),i.length){index_form_data=i.serializeArray();for(var o=0;o<index_form_data.length;o++)this.p(index_form_data[o].name)||this.p(index_form_data[o].name,index_form_data[o].value);var n=i.attr("action")||"",r=n.match(/\/from=([^\/]*)\//);r&&r[1]&&this.p("from",r[1])
}}if("object"==typeof e)for(var a in e)e.hasOwnProperty(a)&&this.p(a,e[a]);this.wdSameName()}function t(e,t,i){i||(i=0);var o=e.length;for(0>i&&(i=o+i);o>i;i++)if(e[i]===t)return i;return-1}var i=["word","pn","nojc","cl","cq","srcid","pd"],o=["word","cl","ct","tn","rn","ie","f","lm","si","gpc","tfflag","usm","z","ch","sts","vit","dsp","trh","trb","tre","la","lo","st","nojc","haobd","rtt","bsst","gvideo","__eis","__eist","oq","fenlei","sid","rsv_idx","rsv_stat","t_samp"],n=["wd"];return e.prototype.clone=function(i){var n=new e(e.clone(this.params));
if("object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&t(o,r)>=0&&n.p(r,i[r]);return n},e.prototype.h=function(e){this.header_params=this.header_params||{};for(var t in e)this.header_params[t]=e[t];return this},e.prototype.buildHeaders=function(e){e&&this.setHeader(e);var t={};for(var i in this.header_params)if("object"==typeof this.header_params[i]){var o=[];for(var n in this.header_params[i]){var r=this.header_params[i][n];r instanceof Array&&(r=r.join("|")),o.push(n+"="+r)}t[i]=o.join("&")}else t[i]=this.header_params[i];
return t},e.prototype.buildSearchUrl=function(e,t){var i="";return location.pathname&&"/s"!==location.pathname&&!location.pathname.match("^/(from|pu)=")&&(i="/"),(t?location.protocol+"//"+location.host+"/":i)+"s?"+this.buildQueryString(e)},e.prototype.buildSyncSearchUrl=function(e){return location.protocol+"//"+location.host+"/s?"+this.buildQueryString(e).replace(/mod=[0-9]*/,"").replace("async=1","")},e.prototype.buildQueryString=function(t){var i=e.clone(this.params);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);
var n="";for(param in i)param&&i.hasOwnProperty(param)&&""!==i[param]&&(n+=param+"="+encodeURIComponent(i[param]).replace(/'/g,"%27")+"&");return n.substr(0,n.length-1)},e.prototype.equals=function(t){if(!t||!t.p)return!1;for(var o=0;o<i.length;o++){var n=i[o];if("pn"==n){var r=this.p(n)?this.p(n):"0",a=t.p(n)?t.p(n):"0";if(r!=a)return!1}else if("word"==n){if(e.normalizeWord(this.p(n))!=e.normalizeWord(t.p(n)))return!1}else if(this.p(n)!=t.p(n))return!1}return!0},e.prototype.matchCache=function(t){if(t.realword){for(var o={},n=0;n<i.length;n++)t.param&&t.param.params&&t.param.params[i[n]]&&(o[i[n]]=t.param.params[i[n]]);
return o.word=t.realword,this.equals(new e(o,!0))}return this.equals(t.param)},e.prototype.p=function(e,i){return t(n,e)>=0&&(e="word"),void 0===i?this.params[e]:(this.params[e]=i,this)},e.prototype.hashCode=function(){var e=[];if(!this.p("word"))return"";for(var t=0;t<i.length;t++){var o=i[t];e.push("pn"!=o||this.p(o)?this.p(o):"0")}return e.join("	")},e.prototype.filterOtherParams=function(){for(var e in this.params)this.params.hasOwnProperty(e)&&t(o,e)<0&&delete this.params[e]},e.prototype.wdSameName=function(){var e;
for(e=0;e<n.length;e++)this.params&&this.params[n[e]]&&(this.params.word=this.params[n[e]],delete this.params[n[e]])},e.parseUrlParams=function(e){var t,i,o,n,r={};e.indexOf("?")>-1?(o=e.split("?"),n=o[1]):n=e,t=n.indexOf("&")>-1?n.split("&"):new Array(n);for(var a=0;a<t.length;a++)try{t[a]=t[a].indexOf("=")>-1?t[a]:t[a]+"=",i=t[a].split("="),r[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}catch(s){}return r},e.clone=function(e){if("object"==typeof e){var t={};for(k in e)e.hasOwnProperty(k)&&(t[k]=e[k])
}else t=e;return t},e.normalizeWord=function(e){return e=e||"",e.toLowerCase().replace(/\s/g,"")},e}),define("search/cache",["require"],function(){function e(e){this.param=e.param,this.manager=e.manager,this.urlPrefix=e.urlPrefix,this.dataType=e.dataType,this.status=t,this.time={},this.deferred=null,this.timmer=null}var t=0,i=10,o=30,n=35,r=200;return $.extend(e.prototype,{load:function(e){var t=this;if(e=$.extend({dataType:t.dataType||"html",url:t.urlPrefix+t.param.buildQueryString(),headers:{}},e),e.headers["Async-Type"]="xml",e.headers["Cache-Control"]="private",e.reload||t.status!==r){if(t.status===i)return!0;
t.time.start=(new Date).getTime(),t.deferred=$.Deferred(),t.status=i;var a=$.ajax(e);t.timmer=setTimeout(function(){clearTimeout(t.timmer),t.status=n,B.cookie("WISEWR","12",{expires:3e3}),t.deferred.reject()},6e4),a.done(function(e){clearTimeout(t.timmer);var i=-1==e.indexOf(decodeURIComponent("%3C!---async_"))&&-1==e.indexOf('<template id="async_')&&!(e.length<150&&e.indexOf('<div id="__status">')>-1);return i?(B.cookie("WISEWR","11",{expires:3e3}),B.cookie("WISEER","1",{expires:3e5}),t.status=o,void t.deferred.reject()):(t.status=r,t.time.received=(new Date).getTime(),t.html=e,e.indexOf(decodeURIComponent("%3C!---async_status"))>-1&&t.manager&&t.manager.addCache(t),void t.deferred.resolve())
}).fail(function(){B.cookie("WISEWR","13",{expires:3e5}),clearTimeout(t.timmer),t.status=o,t.deferred.reject()})}else t.deferred=$.Deferred(),t.deferred.resolve();return t},done:function(e){var t=this;return t.deferred.done(function(){e.apply(t,arguments)}),t},fail:function(e){var t=this;return t.deferred.fail(function(){e.apply(t,arguments)}),t},destroy:function(){return this.xhr&&this.xhr.abort&&this.xhr.abort(),delete this.xhr,delete this.html,self}}),e}),define("search/environment",["require"],function(){function e(){this.updateUserAgent(),this.update(),e.instance=this
}function t(e){e=e||"";for(var t=e.split(""),i=new Array;t.length;)i.push(t.pop());return i.join("")}return $.extend(e.prototype,{isBaiduboxapp:!1,isBaiduboxappLite:!1,isBmbadr:!1,isSearchCraft:!1,isAndroid:!1,isIos:!1,osVersion:!1,deviceVersion:!1,boxVersion:!1,boxPresearch:!1,boxPresid:!1,networkType:!1,updateUserAgent:function(){var e,i=this,o=navigator.userAgent||"";o.indexOf("Mac OS")>-1||o.indexOf("iPhone OS")>-1?i.isIos=!0:o.indexOf("Android")>-1&&(i.isAndroid=!0),o.indexOf("baiduboxapp")>-1&&window.Bdbox&&Bdbox.invokeApp&&(o.indexOf("lite")>-1&&(i.isBaiduboxappLite=!0),i.isBaiduboxapp=!0,i.isIos?(e=o.match("baiduboxapp/([0-9,.]*)"),e&&e[1]&&"0"!==e[1]?i.boxVersion=e[1]:(e=o.match(/([0-9])enohPi/),i.deviceVersion=e&&e[1]||!1,e=o.match("baiduboxapp/([0-9,.,_]*)_"),i.boxVersion=e&&e[1]&&t(e[1]).split("_")[0]||!1)):i.isAndroid&&(e=o.match("baiduboxapp/([0-9,.]*)"),i.boxVersion=e&&e[1]||!1)),o.indexOf("baidubrowser")>-1&&(i.isBmbadr=!0),o.indexOf("SearchCraft")>-1&&(i.isSearchCraft=!0),i.isIos?(e=o.match("iPhone OS ([0-9,_]*) "),i.osVersion=e&&e[1]&&e[1].replace(/_/g,".")||!1):i.isAndroid&&(e=o.match("Android ([0-9,.]*)"),i.osVersion=e&&e[1]||!1)
},updatePublicUser:function(e){var t=this;if(e=e&&e.p&&e.p("pu")||e&&e.pu||"string"==typeof e&&e||!1,e&&t.isBaiduboxapp&&t.isIos){var i=e.match(/cut@iPhone([0-9]*)%2C/);t.deviceVersion=i&&i[1]||t.deviceVersion}if(e&&t.isBaiduboxapp&&!t.cuid){var i=e.match(/cuid%40([^%]*)%2C/);if(i){t.cuid=i[1];for(var o=0,n=0;n<t.cuid.length;n++)o+=t.cuid.charCodeAt(n);var r=o%100;r>=35&&39>=r&&(t.cid=r)}}},updateBoxSamp:function(e){var t=this;if(e=e&&e.p&&e.p("t_samp")||e&&e.t_samp||"string"==typeof e&&e||!1){var i=e.match("presearch_([0-9]*)_([0-9]*)");
i&&(t.boxPresearch=i[1],t.boxPresid=i[2])}},updateNetwork:function(e){var t=this;if("string"==typeof e){var i=e.match(/network=([^$]*)/);if(!i||!i[1])return;e=i[1]}else e=e&&e.p&&e.p("network")||e&&e.network||!1;if(e){var o=e.match(/^(\d*)/),n=e.match(/_(\d*)$/);o&&o[1]&&1*o[1]===1?t.networkType=1:n&&n[1]&&1*n[1]>0&&(1*n[1]===0||(1*n[1]<8?t.networkType=2:1*n[1]<13?t.networkType=3:1*n[1]>=13&&(t.networkType=4)))}},update:function(e){var t=this,i=location.href;t.updatePublicUser(e||i),t.updateBoxSamp(e||i),t.updateNetwork(e||i)
},boxVersionGreaterEqual:function(e,t){e=(e||"").toString().split("."),t=(this.boxVersion||t||"").toString().split(".");var i=1e3*(e[0]||0)*1e3+1e3*(e[1]||0)+1*(e[2]||0),o=1e3*(t[0]||0)*1e3+1e3*(t[1]||0)+1*(t[2]||0);return o>=i}}),e}),define("search/currentState",["require","search/viewmodel/pageViewModel","search/viewmodel/indexViewModel"],function(e){var t=e("search/viewmodel/pageViewModel"),i=e("search/viewmodel/indexViewModel");return{param:null,confirmTime:null,cache:null,pageView:null,prevPath:null,preRender:!1,setParam:function(e){this.param=e,this.confirmTime=+new Date
},setCache:function(e){this.cache=e,this.pageView="/"!=this.prevPath?new t({cache:e}):new i({cache:e}),this.pageView.start=e.time.start,this.preRender=e&&e.isPreShow?!0:!1},clearCache:function(){this.cache=null,this.pageView=null,this.preRender=!1}}}),define("search/log",["require"],function(){var e={};return["log","info","error","warn"].forEach(function(t){e[t]=function(){B.ls.getItem("debugAsync")&&console[t].apply(console,arguments)}}),e}),define("search/monitor",["require","search/currentState"],function(e){function t(){return $(".results").hasClass("se-predestroy")||0==$(".result,.se-noresult-tips").length
}function i(){return a.cache?a.cache.status:o?o.status:s}var o,n,r=B.search.Search,a=e("search/currentState"),s=1,c=[],d=location.href.indexOf("presearch_1_25")>-1?"1":"",p=[3e3,6e3,1e4,14e3],u=[function(){t()&&window.page&&page.webb&&page.webb.exception&&page.webb.exception.trigger("wiseasync",{st:"timeoutzero",requestStatus:i(),group:d,word:n&&n.p("word")||"",tanet:page.comm.tanet||0})},function(){t()&&window.page&&page.webb&&page.webb.exception&&page.webb.exception.trigger("wiseasync",{st:"timeoutfirst",requestStatus:i(),group:d,word:n&&n.p("word")||"",tanet:page.comm.tanet||0})
},function(){t()&&(200!==i()?window.page&&page.webb&&page.webb.exception&&page.webb.exception.trigger("wiseasync",{st:"timeoutsec",requestStatus:i(),group:d,word:n&&n.p("word")||"",tanet:page.comm.tanet||0}):setTimeout(function(){t()&&window.page&&page.webb&&page.webb.exception&&page.webb.exception.trigger("wiseasync",{st:"timeoutsec",requestStatus:i(),group:d,word:n&&n.p("word")||"",tanet:page.comm.tanet||0})},2e3))},function(){t()&&(B.cookie("WISEWR","16",{expires:864e5}),o?(r.invokeApp({state:"50",url:encodeURIComponent(o.redirectUrl)}),r.directUrl(o.param)):n&&(r.invokeApp({state:"50",url:encodeURIComponent(n.buildSyncSearchUrl())}),r.directUrl(n)))
}];return{userSearch:function(e){n=e,o=null;for(var t=0;t<p.length;++t)clearTimeout(c[t]),c[t]=setTimeout(u[t],p[t])},addDependedCache:function(e){o=e}}}),define("search/cacheManager",["search/cache"],function(e){function t(e){this.option=e,this.caches=[],t.instance=this}function i(e,t,i){i||(i=0);var o=e.length;for(0>i&&(i=o+i);o>i;i++)if(e[i]===t)return i;return-1}function o(e){"object"==typeof e&&null!=e&&e.destroy()}function n(e,t,i){var o,n;return(n=t.p("word"))?($.grep(e,function(e){return i.loaded&&!e.loaded?!1:void(t.matchCache(e)&&(o=e))
}),o?o:null):!1}var r=18e4,a=15;return $.extend(t.prototype,{addCache:function(e){var t=this;if(-1==i(t.caches,e))for(t.caches.unshift(e);t.caches.length>a;)o(t.caches.pop())},deleteCache:function(e){var t=this;o(e),t.caches=$.grep(t.caches,function(t){return t!==e})},getNewCache:function(t){var i=this,o=$.extend(i.option&&i.option.cache,{param:t,manager:i});return new e(o)},hasCache:function(e,t){var i=this;t||(t={});var o=n(i.caches,e,t);return o&&(new Date).getTime()-o.time.received>r&&(this.deleteCache(o),o=null),o
},deleteCacheByParam:function(){var e=this;e.caches=$.grep(e.caches,function(e){var t=e.param.equals(e.param);return t&&o(e),!t})},clearCache:function(e){var t=this;t.caches=$.grep(t.caches,function(i,o){return o!==e?(t.destroyCache(o),!1):!0}),t.caches=[]},getCacheList:function(){var e=$.map(this.caches,function(e){return e&&(new Date).getTime()-e.time.received>r?!1:e.querysign});return e=$.grep(e,function(e){return!!e}),e.join("	")}}),t}),define("search/viewmodel",["require"],function(){var e=function(){this.model=[],this.waitdeal=[],this._lazyrender=!1,this._renderable=!0
};return e.prototype={_set:function(e){var t=this;t.options=$.extend({templateString:"",splitStartPrefix:decodeURIComponent("%3C!---async_"),splitEndPrefix:decodeURIComponent("%3C!--%2Fasync_"),ableBind:!0},t.options,e),t._dealTemplateData(),t._mergeModel()},_dealTemplateData:function(){var e=this,t=e.options.splitStartPrefix;if(e.options.templateString){for(var i=e.model.length?e.model[e.model.length-1].end:0,o=e.options.templateString.substring(i).split(t),n=i,r=0;r<o.length;r++){var a=o[r].indexOf(">"),s=o[r].substring(0,a).match(/([^-]*)--/);
if(n+=(r>0?t.length:0)+o[r].length,s&&s[1]){var c=o[r].lastIndexOf(e.options.splitEndPrefix+s[1]+"-->");a>-1&&c>-1&&e.model.push({id:s[1],html:o[r].substring(a+1,c),end:n,rendered:!1})}}e.options.html=e.options.templateString,e.options.templateString=""}},_mergeModel:function(){var e=this;e.options.data&&(e.model=e.options.data,delete e.options.data)},_render:function(){for(var e=this,t=0;t<e.model.length;t++)if(0==t&&e.model[t].rendered===!1&&e._proxyAction("before","render",e.model[t],e.options),0==e.model[t].rendered){e.model[t].rendered=!0,e._proxyAction("before","render_"+e.model[t].id,e.model[t],e.options),e._proxyAction("","render_"+e.model[t].id,e.model[t],e.options);
var i=e._proxyAction("after","render_"+e.model[t].id,e.model[t],e.options);i&&i.release&&(e._lazyrender=!0)}e.options.allRecieved&&e._proxyAction("after","render",e.model[t],e.options)},_proxyAction:function(e,t){if(this._renderable!==!1){var i=this;e=e?"do"+e+"-":"do",t=t||"";var o=(e+t).replace(/\_/g,"-").replace(/\b(\w)|\s(\w)/g,function(e){return e.toUpperCase()}).replace(/-/g,"").substring(2);if(i[o]){var n=Array.prototype.slice.call(arguments,2);return i._lazyrender?(i._addRunAction(function(){i[o].apply(i,n)
}),i._exeuteAction(),!0):i[o].apply(i,n)}return!1}},_addRunAction:function(e){var t=this;t._actions=t._actions||[],t._actions.push(e)},_exeuteAction:function(){var e=this;if(this._renderable!==!1&&!e._exeuteStatus){var t=e._actions.shift();t&&(e._exeuteStatus=!0,setTimeout(function(){t(),e._exeuteStatus=!1,e._exeuteAction.apply(e)},0))}},set:function(e){this._dealing&&this.waitdeal.push(e),this._dealing=!0,this._set(e),this.options.ableBind===!1||this._render(),this._dealing=!1,this.waitdeal.length>0&&(e=this.waitdeal.splice(0,1),this.set(e))
},beforeRender:function(){},render:function(){},afterRender:function(){},die:function(){this._renderable=!1}},e}),define("search/viewmodel/pageViewModel",["require","search/viewmodel","modules/tablink"],function(e){function t(e){i.apply(this,arguments),this.cache=e.cache,this.body=$("body"),this.page=$(".search-page"),this.pagebd=$(".se-page-bd"),this.pageft=$(".search-page .se-page-ft"),this.copyright=$(".se-page-copyright"),this.blank=$(".se-foot-blank"),this.headJS="",this.pageHtml="",this.footJs="",this.topResultExist=$(".se-results-top").length,this.pageBdHtmlLazy="",this.statusHtml=""
}var i=e("search/viewmodel"),o=e("modules/tablink"),n=B.search.Search;return $.extend(t.prototype,i.prototype,{_html:function(e,t,i){if("string"!=typeof e||(e=$(e),0!=e.length))try{$(e)[t](i)}catch(o){window.console&&console.error&&console.error(o)}},appendTo:function(e,t){this._html(e,"append",t)},before:function(e,t){this._html(e,"before",t)},renderStatus:function(e){n.time.head=(new Date).getTime(),this.statusHtml=e.html,e.html.indexOf("chunk_err")>-1&&(this.cache.param.p("bd_ck","0"),n.directUrl(this.cache.param))
},clearResult:function(){"loading"==window.__sam_async_type||"loadwait"==window.__sam_async_type||n.deleteResultDom(),this.pagebd[0]&&(this.pagebd[0].style.opacity="")},beforeRender:function(){n.trigger("start")},renderHeadJs0:function(e){this.headJS+=e.html},renderHeadJs1:function(e){this.headJS+=e.html},renderHeadJs2:function(e){this.headJS+=e.html},renderHeadJs3:function(e){this.headJS+=e.html,this.appendTo(this.body,'<div class="se-async-js">'+this.headJS+"</div>")},renderPagePre:function(e){this.pageHtml=e.html
},renderTopRelation:function(e){$(".se-results-top").length||(this.pageHtml+=e.html)},renderPageBd:function(e){if(n.time.startbd=(new Date).getTime(),this.clearResult(),this.pageHtml+=e.html,"firstpaint"==window.__sam_async_type||"loadwait"==window.__sam_async_type){var t=this.pageHtml.indexOf("</firstpaint>");if(t>0){var i=this.pageHtml.substring(0,t+"</firstpaint>".length)+"</div></div>",o=this.pageHtml.substring(t+"</firstpaint>".length).split("</div firstpainted>");if(3==o.length)return this.pageBdHtmlLazy=o,this.before(this.pageft,i),void document.body.scrollHeight
}}this.before(this.pageft,this.pageHtml),n.time.bd=(new Date).getTime()},afterRenderPageBd:function(){return $(".result-loading").hide(),this.pageft[0]&&(this.pageft[0].style.visibility="visible"),this.copyright[0]&&(this.copyright[0].style.visibility="visible"),"firstpaint"==window.__sam_async_type||"loadwait"==window.__sam_async_type?{release:!0}:void(this.topResultExist||scrollTo(0,0))},renderPageVariable:function(e){this.pageBdHtmlLazy&&(this.pageBdHtmlLazy[0]&&$(".results").append(this.pageBdHtmlLazy[0]),this.pageBdHtmlLazy[1]&&$(".se-page-bd").append(this.pageBdHtmlLazy[1])),this.appendTo(this.page,e.html)
},renderFootJs0:function(e){this.footJs+=e.html},renderFootJs1:function(e){this.footJs+=e.html},renderFootJs2:function(e){this.footJs+=e.html,this.appendTo(".se-async-js",this.footJs),n.trigger("ready")},renderNewTablink:function(e){e.html&&o.replaceWith(e.html,this.cache.realword)},renderSearchTool:function(e){e.html&&($(".searchToolContainer").remove(),this.appendTo(".se-page-hd-content",e.html))},afterRender:function(e){var t=this;return this.cache&&this.cache.isPreShow?void n.one("confirmpreshow",function(){t.cache.isPreShow=!1,t.afterRender(e)
}):(this.cache.realword&&n.chgParam(this.cache.realword),void(t.statusHtml&&-1===t.statusHtml.indexOf(page.comm.lid)||(n.trigger("init"),$("img[data-imagedelaysrc]").not('[data-imageinvisible="1"]').imageDelayload(),n.trigger("load"),n.trigger("DOMContentLoaded"),$(".se-bn").blur(),window.Bdbox&&Bdbox.updateKeyword&&Bdbox.updateKeyword(decodeURIComponent((page.comm.query||page.comm.vsearchQuery||this.cache.realword).replace(/\+/g," ")),!0))))}}),t}),define("search/viewmodel/cacheViewModel",["require","search/viewmodel"],function(require){function cacheViewModel(e){ViewModel.apply(this,arguments),this.cache=e.cache
}var ViewModel=require("search/viewmodel"),Search=B.search.Search;return $.extend(cacheViewModel.prototype,ViewModel.prototype,{renderStatus:function(model){var self=this,match=model.html.match(/<\!\-\-({.*})\-\-\>/);if(match[1]){var status=eval("("+match[1]+")");status.realword&&(self.cache.realword=status.realword,self.cache.querysign=status.querysign,self.cache.req=status)}}}),cacheViewModel}),define("search/viewmodel/indexViewModel",["require","search/viewmodel"],function(e){function t(e){i.apply(this,arguments),this.cache=e.cache,this.body=$("body"),this.page=$(".search-page"),this.pageft=$(".search-page .se-page-ft"),this.copyright=$(".se-page-copyright"),this.blank=$(".se-foot-blank"),this.headJS="",this.pageHtml="",this.footJs=""
}var i=e("search/viewmodel"),o=B.search.Search;return $.extend(t.prototype,i.prototype,{_html:function(e,t,i){if("string"!=typeof e||(e=$(e),0!=e.length))try{$(e)[t](i)}catch(o){window.console&&console.error&&console.error(o)}},appendTo:function(e,t){this._html(e,"append",t)},before:function(e,t){this._html(e,"before",t)},renderStatus:function(){o.time.head=(new Date).getTime()},clearResult:function(){this.pageft[0]&&(this.pageft[0].style.visibility="hidden"),this.copyright[0]&&(this.copyright[0].style.visibility="hidden"),this.blank[0]&&(this.blank[0].style.display=""),o.deleteResultDom(),this.page[0]&&(this.page[0].style.opacity="")
},beforeRender:function(){o.trigger("start"),this.indexPage=$("#page"),this.indexCss=$("style"),this.indexPage.remove(),this.indexCss.remove(),$("#page-hd").remove()},afterRender:function(e,t){var i="<!---ind",n=i+"ex-->",r=t.html.split(n);return r.length<3?void location.reload():(this.clearResult(),this._html("head","append",r[1]),this._html("body","append",r[3]),scrollTo(0,0),o.trigger("ready"),this.cache.realword&&o.chgParam(this.cache.realword),o.trigger("init"),o.trigger("load"),void o.trigger("DOMContentLoaded"))
},recoverIndex:function(){}}),t}),define("search/utils/speedlog",["require"],function(){function e(){this.clientSt=null,this.navSt=null,this.loadSt=null,this.clientParam={},window.page=window.page||{},page.comm=page.comm||{},page.comm.speedlog=this}function t(e,t,i){if(!e||!t)return!1;var o=null;return e.toString().length==t.toString().length||(7==e.toString().length?(t=t.toString(),t=t.substring(t.length-7)):7==t.toString().length&&(e=e.toString(),e=e.substring(e.length-7))),o=1*e-1*t,0>o||i&&o>i?!1:o
}return e.prototype={initSync:function(){this.navSt=window.performance&&window.performance.timing&&window.performance.timing.navigationStart||null,this.fetchStart=window.performance&&window.performance.timing&&window.performance.timing.fetchStart||null,this.initClientTime(),this.setZbiosTcs()},initAsync:function(e){try{this.navSt=(new Date).getTime(),this.initClientTime(e,!0),this.setZbiosTcs(e,!0)}catch(t){console.warn&&console.warn("speedlog error:",t)}},initClientTime:function(e,t){if(this.clientSt=null,e||1!=t){e=e||location.search;
var i=e.match(/(tcs|ts)=(\d+)/);i&&i[2]&&(this.clientSt=1*i[2])}},setZbiosTcs:function(e,t){if(this.clientParam={},e||1!=t){e||t||(e=location.search);var i=e.match(/tcs=(\d+)(.*)/);if(i&&void 0!==i[2]){var o=i[2].match(/\_S(\d+)/);void 0!==o[1]&&(this.clientParam.t_stp=1*o[1])}}},calClientToNavigator:function(){return t(this.navSt,this.clientSt,5e3)},calNavigatorToFetch:function(){return t(this.fetchStart,this.navSt,5e3)},mark:function(e){this[e]=(new Date).getTime()}},e}),define("search/search",["require","search/param","search/cacheManager","search/viewmodel/pageViewModel","search/viewmodel/cacheViewModel","sfr","search/environment","search/log","search/monitor","search/currentState","search/utils/speedlog","utils/storage"],function(e){function t(e){var t=e.word||e.p("word")||"",i=e.sa||e.p&&e.p("sa")||"";
return i.indexOf("_cm")>-1?!0:(t=t.replace(/\s/gi,""),-1!==M.indexOf(t)?!1:M.length&&M[M.length-1].indexOf(t)>-1?!1:(M.push(t),M=M.slice(-5),t==B.comm.query?!1:!0))}function i(e){e=e||"";var t=B.comm.lid||"";return e.substr(0,6)+t.substr(-5)+e.substr(-5)+parseInt(99999*Math.random())}function o(e){var t=u._.get(window.page,"comm.sampleval.WISE_TPL_COMMON_SAMPLE_FLAG");return t!==e?!1:!0}var n,r,a=B.search.Search,s=e("search/param"),c=e("search/cacheManager"),d=(e("search/viewmodel/pageViewModel"),e("search/viewmodel/cacheViewModel")),p=e("sfr").action,u=e("sfr"),l=e("search/environment"),m=e("search/log"),h=e("search/monitor"),f=e("search/currentState"),b=e("search/utils/speedlog"),g=new b,v="/s?",w=0,y=0,x=0,_=[],S=B.comm.baiduid||"",k="onpopstate"in window,C=B.comm.t_samp||"",A="",P=(e("utils/storage").ls,{}),O=location.pathname.indexOf("searchframe")>-1?100:200,I=null,T=!1,R="",j=!0,U=100*Math.random();
window.__sam_async_type=window.__sam_async_type||"loadwait",B.cookie("WISEWR","",{expires:-1}),!B.comm.tanet&&window.sSession&&window.sSession.netType&&(B.comm.tanet=window.sSession.netType);var E=l.instance||new l;E.cid&&(E.boxPresid>=40||E.boxPresid<30),B.comm.compileCheck=1;var L=new c({cache:{urlPrefix:v}}),q=!1,N=i(S),D={};$.extend(a,{time:{},beforeSendHanddler:function(e){var t=this;return function(i){return i.addEventListener("progress",function(o){m.log("progress"),t.xhrProgress(o,i,e)}),!0
}},xhrProgress:function(e,t,i){i.html=t.responseText,this._handleCacheResult(i)},prefetchZbios:function(e,t){if(B.comm.zbiosPrefetchSwitch&&"prefetoff"!=window.__sam_async_type){if("prefetall"===window.__sam_async_type||window.__sam_ios_prefetch===!0);else if(E.isIos&&j===!1)return;if(!(0===e.word.indexOf("@")||encodeURIComponent(e.word).length<=2||(E.update(e),16!==t&&E.isIos&&e.sa&&!e.sa.match(/ikb|tkb|bkb/)||B.comm.tanet&&(4==B.comm.tanet||2==B.comm.tanet)||1*E.networkType===4&&70>U))){E.boxPresearch&&25==E.boxPresid?e.sp=10:E.boxPresearch&&26==E.boxPresid?e.sp=11:E.boxPresearch&&28!=E.boxPresid&&(e.sp=9),3==window.__sam_async_type&&(e.sp=9),window.__sam_async_super&&(e.sp=9),e.sp=9,e.mod=1,e.async=1,e.pre=2,e.clist=L.getCacheList(),e.isid=N;
var i=new s(e,!0);this.prefetch(i,{type:t})}}},prefetchInput:function(e){var t=e.word;if(!t||encodeURIComponent(t).length<=2)return!1;if(null===e.sid&&delete e.sid,1*page.comm.bfe_sample===70||1*page.comm.bfe_sample===71||1*page.comm.bfe_sample===72);else if(E.isSearchCraft);else{if(B.comm.tanet&&1*B.comm.tanet===4)return;if(E.isBaiduboxapp);else if(!B.comm.tanet)return}var i=new s($.extend({},e,{pn:"",word:t,mod:1,async:1,pre:2,clist:L.getCacheList(),isid:N,sp:9,sa:e.sa||$('.se-form input[name="sa"]').val()||""}));
this.prefetch(i,{prerender:e.prerender})},prefetchInputMulti:function(e,i){if(t({word:i})){e=e||[];for(var o=L.getCacheList(),n=0;n<e.length;n++){var r=e[n],a=r.word;if(a&&!(encodeURIComponent(a).length<=2)){var c=new s({pn:"",word:a,mod:1,async:1,pre:2,clist:o,isid:N});this.prefetch(c)}}}},prefetch:function(e,i){var o=i&&i.type,n=!1;t(e)||(n=!0);var r=this;if((!B.comm.sampleval||"async_old"!==B.comm.sampleval.WISE_TPL_COMMON_SAMPLE_FLAG)&&B.comm.prefetchSwitch&&r.supportAsync()){e.p("prequery")&&(e.p("f4s",1),e.p("word",e.p("prequery")));
var a=e.p("word"),s=e.p("sa")||"",c=!1;if(s&&s.indexOf("_cm")>-1&&(c=!0,e.p("f4s",1)),!(a.length>14)){page.comm.from&&"0"!==page.comm.from&&e.p("from",page.comm.from),"m.baidu.com"!==location.host&&e.p("ms",1);var d=L.hasCache(e);c===!1&&P[a]||(d&&c===!1||n===!0?i&&i.prerender&&d&&r.preshow(e,d):(m.log("prefetch:"+a),w++,d=L.getNewCache(e),P[a]=d,d.load(window.__sam_async_noflow?{}:{beforeSend:r.beforeSendHanddler(d)}),d.done(function(){delete P[a],r._handleCacheResult(d),d.realword?(y++,m.log("got prefetch:"+a),-1==$.inArray(d.querysign,_)&&_.push(d.querysign)):(x++,m.log("got prefetch but no realword:"+a)),(i&&i.prerender||31==E.boxPresid&&16==o||32==E.boxPresid&&s.indexOf("ikb")>-1&&16!=o||window.__sam_async_sercpreshow&&location.pathname.indexOf("searchframe")>-1&&E.isSearchCraft)&&d.realword&&(!f.confirmTime||d.time.start>f.confirmTime)&&r.preshow(e,d)
}).fail(function(){delete P[a],d===f.cache&&(r.invokeApp({state:"50",url:encodeURIComponent(d.redirectUrl)}),r.directUrl(d.param)),delete d})))}}},preshow:function(e,t){var i=this;if(!(f&&f.cache&&t&&f.cache.realword===t.realword)){if(f.cache&&f.cache.isPreShowing)return void(f.cache.nextPreshow={param:e,cache:t});f.pageView&&f.pageView.die();var o=f.cache;f.clearCache(),t.isPreShowing=!0,a.trigger("stop"),a.trigger("destroy"),this.clearResult(),a.one("afterdestroy",function(){o&&(o.isPreShow=!1),a.restoreEvent(),t.isPreShow=!0,i._handleCacheResult(t),document.title=(t.realword||t.query)+" - 百度",i.chgQuery(t.realword||t.query),a.one("afterready",function(){t.isPreShowing=!1,f.cache.nextPreshow&&(i.preshow(f.cache.nextPreshow.param,f.cache.nextPreshow.cache),delete f.cache.nextPreshow)
})})}},confirmPreshow:function(e,t){var i=this;f.cache.isPreShow=t.isPreShow=!1,f.cache.redirectUrl=t.redirectUrl=e.buildSyncSearchUrl(),f.isIs=!0,document.title=(t.realword||t.query)+" - 百度",i.invokeApp({state:"20",url:encodeURIComponent(t.redirectUrl)}),a.trigger("confirmpreshow")},cancelPreShow:function(){f.cache.isPreShow?(f.cache.isPreShow=!1,this.search("s"+location.search)):f.cache.isPreShow=!1},searchByParamstring:function(e){var t=e.match(/(^|\/)+(s\?.*)/);if(t[2]){var i=s.parseUrlParams(t[2]),o=new s(i,!0);
return this.submit(o),!0}return!1},searchByParams:function(e,t){g.initAsync(t.param);var i=(new Date).getTime().toString();e=$.extend({},D,e,{ts:i.substring(i.length-7)}),t.word&&delete e.cki,delete e.tcs,delete e.sl;var o=new s(e,!0);return this.submit(o),!0},prefetchByParams:function(e,t){return"zbios"==t.tn?(this.prefetchZbios(e,t.otype),!0):void 0},submitForm:function(e){var t=e.word||"",i=new s($.extend({},e,{pn:"",word:t}));this.submit(i)},submitIndex:function(e){var t=this;t.initEvent();var i=e.word||"",o=new s($.extend({},e,{pn:"",word:i}));
this.submit(o,{prevPath:"/"})},indexSearch:function(e){return this.initEvent(),$("#page").show(),this.search(e,!1,{prevPath:"/"})},hasCache:function(e){param=new s(e,!0);var t=L.hasCache(param);return!!t},hasCacheOrWaiting:function(e){var t=this;param=new s(e,!0);var i=L.hasCache(param);return i?!0:(Object.keys(P).forEach(function(e){if(!i){var o=P[e];o.realword||t._tryParseStatus(o),o.realword===param.p("word")&&(i=!0)}}),i?!0:!1)},recoverIndex:function(){location.reload(!1)},submitFormTonglan:function(e){e&&"string"==typeof e&&(e=s.parseUrlParams(e)),e.word=decodeURIComponent(e.word),"6"==page.comm.browserid&&(e.tn="zbios");
var t=(new Date).getTime().toString(),i=$.extend({},D,e,{pn:"",ts:t.substring(t.length-7),cq:page.comm.topRelation,rqid:page.comm.lid}),o=new s(i,!0);return 12==page.comm.browserid?void(window.location.href="//m.baidu.com/"+o.buildSearchUrl()):void this.submit(o)},submit:function(e,t){if(""==e.p("word").length);else if(this.supportAsync()&&this.supportAsyncSearch(e)){e.p("isid",N),e.p("mod",0),e.p("async",1),e.p("oq",q||""),page.comm.from&&"0"!==page.comm.from&&e.p("from",page.comm.from),"m.baidu.com"!==location.host&&e.p("ms",1),C&&e.p("t_samp",C);
var i=[e.buildSearchUrl(),null,{force:!1,silent:!1,param:e}];try{location.pathname.indexOf("searchframe")>-1?p.reset.apply(p,i):p.redirect.apply(p,i)}catch(o){B.cookie("WISEWR","21",{expires:3e3})}window.__sam_async_super===!0&&window.__sam_async_index===!0||this.search(e,!0,t)}else this.directUrl(e)},directUrl:function(e){var t=e;"object"==typeof t&&(t=e.buildSyncSearchUrl());var i=document.getElementsByClassName("se-page-bd")[0];i&&(i.style.opacity=""),this.dispatch("leave"),location.href=e.buildSyncSearchUrl()
},supportAsyncSearch:function(e){var t=e.p("word")||"",i=e.p("st")||"";return t&&0!=t.indexOf("@")&&"b"!=i.substring(2,3)&&"n"!=i.substring(3,4)?location.hash&&location.hash.length>5?!1:!0:!1},supportAsync:function(){return"0"===page.comm.asyncSwitch?!1:k},search:function(e,t,o){var c=this,d=c.time.start=(new Date).getTime();if("string"==typeof e?(e=s.parseUrlParams(e),e=new s(e,!0)):!e.p&&e.params&&(e=new s(e.params,!0)),t)I={param:e,time:d};else{if(I&&I.param&&I.param.equals(e)&&d-I.time<3e3)return void(r=d-I.time);
I=!1}h.userSearch(e);var p=e.p("word");if(m.log("search()",p),void 0===e.p("mod")&&e.p("mod",0),void 0===e.p("async")&&e.p("async",1),E.isBaiduboxapp&&e.p("tn","zbios"),A){var u=new Date;u.setTime(u.getTime()+31536e6),document.cookie="BAIDUID="+A+";domain=.baidu.com;path=/;expires="+u.toGMTString()+";"}var l=e.p("mmsuse")||!1,b=e.p("pu")||!1,v=e.p("isid");l=l&&(l.match(/dq@[a-zA-Z0-9]/)||l.match(/voiwd/))?!0:!1;var w=f.cache&&e.matchCache(f.cache)&&f.cache.isPreShow;if(l);else if(w)return f.setParam(e),void c.confirmPreshow(e,f.cache);
f.pageView&&f.pageView.die(),f.prevPath=o&&o.prevPath;var y=L.hasCache(e);if(y)if(window.fif&&window.fif.resultLastRedirectState&&window.fif.resultLastRedirectState.dontCache)L.deleteCache(y),y=!1;else if(b&&b.indexOf("_voice")&&y.param&&y.param.p&&v!=y.param.p("isid"))L.deleteCache(y),y=!1;else if(l)L.deleteCache(y),y=!1;else if(f.cache&&y.time.received==f.cache.time.received){if(d-f.cache.received<500)return;L.deleteCache(y),y=!1}else if(!l&&y&&y.param&&y.param.p){var x=y.param.p("mmsuse")||"";
x&&(x.match(/dq@[a-zA-Z0-9]/)||x.match(/voiwd/))&&(L.deleteCache(y),y=!1)}if(T=!!y,"loading"==window.__sam_async_type||"loadwait"==window.__sam_async_type);else{var _=document.getElementsByClassName("se-page-bd")[0];_&&(_.style.opacity=.7)}$(".results").addClass("se-predestroy"),n=null,r=null,R=B.comm.sampleval&&B.comm.sampleval.WISE_TPL_COMMON_SAMPLE_FLAG||"",y||(y=L.getNewCache(e)),f.setParam(e),f.cache&&(f.cache.isPreShow=!1),f&&f.cache&&f.cache.nextPreshow&&delete f.cache.nextPreshow,f.clearCache(),m.log("before cache.load"),e.p("ts")&&(n=(new Date).getTime().toString().substring(6)-1*e.p("ts")),g.mark("fetchStart"),y.load(window.__sam_async_noflow?{}:{beforeSend:c.beforeSendHanddler(y)})&&(h.addDependedCache(y),1!=e.p("cki")&&(page.comm.query=encodeURIComponent(p)),c.chgQuery(p),y.redirectUrl=e.buildSyncSearchUrl(),c.invokeApp({state:"20",url:encodeURIComponent(y.redirectUrl)}),a.trigger("stop"),a.trigger("destroy",{targetParam:e}),this.clearResult(),m.log("destroy"),a.one("afterdestroy",function(){a.restoreEvent(),N=i(S)
}),c.time.des=(new Date).getTime(),window.__sam_async_index=!1,Object.keys(P).forEach(function(e){c._handleCacheResult(P[e])}),y.done(function(){c.time.net=c.time.ajax=(new Date).getTime(),c._handleCacheResult(y),y.realword||(c.invokeApp({state:"50",url:encodeURIComponent(y.redirectUrl)}),c.directUrl(y.param))}).fail(function(){B.cookie("WISEWR")||B.cookie("WISEWR","14",{expires:3e3}),c.invokeApp({state:"50",url:encodeURIComponent(y.redirectUrl)}),c.directUrl(y.param)}))},_handleCacheResult:function(e){var t=this;
e.realword||t._tryParseStatus(e),m.log("_handleCacheResult",e.param.p("mod"),e.param.p("f4s"),e.param.p("word"),e.realword,e.isPreShow,e.status);var i=f.param&&f.param.p&&f.param.p("mmsuse");if(!i||!i.match(/voiwd/)&&!i.match(/dq@[a-zA-Z0-9]/)||!e.param||1!=e.param.p("mod")){if(!f.cache){var o=0==e.param.p("mod")&&e.param==f.param,n=e.realword&&f.param&&f.param.matchCache(e);(o||n||e.isPreShow)&&(e.redirectUrl=e.param.buildSyncSearchUrl(),f.setCache(e),m.info("used to render:",e.param.p("mod"),e.param.p("f4s"),e.param.p("word"),e.realword,e.isPreShow,e.status))
}f.cache===e&&(f.pageView.set({ableBind:!0,templateString:e.html,allRecieved:200==e.status}),m.log("render part:",e.param.p("mod"),e.param.p("f4s"),e.param.p("word"),e.realword,e.isPreShow,e.status,e.html&&e.html.length))}},_tryParseStatus:function(e){var t=new d({cacheManager:L,cache:e});t.set({ableBind:!0,templateString:e.html,allRecieved:200==e.status})},confirmCache:function(e,t){if(e&&e.param&&e.req&&e.confirmed!==!0){m.info("confirmed cache");var i=e.param;i.p("mod",2),i.p("cqid",e.req.lid),i.p("word",e.req.realword),i.p("ps_tm",w),i.p("ps_rs",y),i.p("ps_nw",x),i.p("ps_rt",_.length),i.p("isa",i.p("sa")),i.p("sa",t.p("sa")),i.p("speechid",t.p("speechid")),i.p("ant_ct",t.p("ant_ct")),f.preRender&&i.p("ps_prd",1),$.ajax({datatype:"html",url:v+i.buildQueryString()}),e.confirmed=!0,this.resetLogParam()
}},resetLogParam:function(){w=y=x=0,_=[]},setSpeedLogParam:function(e){var t=this;O++,B.comm.ps={mod:f.cache.req&&f.cache.req.mod||"",ps_tm:w,ps_rs:y,ps_nw:x,ps_cost:f.cache.time&&f.cache.time.received-f.cache.time.start,ps_savebd:t.time.net-t.time.startbd,ps_srt:n,ps_rtt:r,ps_sn:O,ps_old_fl:R},e.p("ts")&&(B.comm.ps.net=t.time.head-t.time.start,B.comm.ps.net=Math.max(B.comm.ps.net,10)),f&&f.isIs&&(B.comm.ps.net=2),f.preRender&&(page.comm.ps.ps_prd=1),B.comm.ps.mod=1==B.comm.ps.mod?2:B.comm.ps.mod,T&&(B.comm.ps.ps_rmod2=1)
},clearResult:function(){var e=this;e.time.clst=(new Date).getTime(),$(".se-input").trigger("blur"),$("#search-btm-zone,.se-pagenav").hide(),$("#index-card").hide(),$("#search-card").show(),$("head>script:not(.code-to-write)").remove(),$("body>script:not([data-key])").remove(),$(".se-foot-blank~*").remove(),$("#searchwordtobox").remove(),$(".se-common-base,.se-async-js").remove(),$(".search-page~div:not([data-for])").remove();var t=document.querySelector(".se-page-hd-content");t&&(t.style.visibility="visible"),e.preDeleteDom=$(".se-zbios-hide,.se-frame-hide,.se-page-bd,body>style:not([data-key]),.se-page-pre-style,.se-predestroy"),("loading"==window.__sam_async_type||"loadwait"==window.__sam_async_type)&&(e.hideBottomDom(),e.displayLoading()),e.time.clend=(new Date).getTime()
},hideBottomDom:function(){var e=$(".search-page .se-page-ft"),t=$(".se-page-copyright"),i=$(".se-foot-blank");e[0]&&(e[0].style.visibility="hidden"),t[0]&&(t[0].style.visibility="hidden"),i[0]&&(i[0].style.display="")},displayLoading:function(){var e=this;$(".result-loading").show(),e.preDeleteDom&&(e.preDeleteDom.remove(),e.preDeleteDom=!1)},deleteResultDom:function(){var e=this;e.hideBottomDom(),e.displayLoading()},clearTopRealtion:function(e){!e.params.cq&&$(".se-results-top").length&&$(".se-results-top").remove()
},chgQuery:function(e){e!==q&&(q=e,e?(document.title=e+" - 百度",E.isSearchCraft&&(e=e.replace(/[<>]/g,function(e){return{"<":"&lt;",">":"&gt;"}[e]}),$("#head-queryarea").length&&$("#head-queryarea").html(e))):document.title="百度一下")},chgParam:function(e){var t=Array.prototype.slice,i=/(word=|w=|kw=|search-|key=|s=s%26wd%3D|#search\/|#search=)(.*?)(&|$)/i,o=/(word=)(.*?)(&|$)/,n=t.call($(".se-input, se-encode"));n.forEach(function(t){if(1===page.comm.samWiseatom)$(window).trigger("searchbox:update",{word:e});
else{var i=t.tagName.toLowerCase();"input"===i||"textarea"===i?t.value=e:t.innerText=e}}),e&&($("a.h-tab, .more-links > a").forEach(function(t){var o=t.getAttribute("href");if(o){o=o.replace(i,"$1"+encodeURIComponent(e)+"$3"),t.setAttribute("href",o);var n=t.getAttribute("data-schema");if("地图"===t.innerText.trim()&&n){var r=n.replace(/(query=).*/,"$1");t.setAttribute("data-schema",r+encodeURIComponent(e))}}}),$("#page_copyright .switch-to-utouch, #page_copyright .feedback").forEach(function(t){var i=t.getAttribute("href");
i=i.replace(o,"$1"+encodeURIComponent(e)+"$3"),t.setAttribute("href",i)}))},delegateLinkSearch:function(){function e(e,i,o){var n=new s(o,!0);if(t.supportAsyncSearch(n)){var r=n.buildSearchUrl();return n.p("mod",0),n.p("async",1),n.p("ps_dg",1),B.comm.cid&&n.p("acid",B.comm.cid),p.redirect(r,null,{force:!1,silent:!1,param:n}),!1}e.attr("href",i.buildSearchUrl(o,!0)).attr("target","_self")}var t=this;$(document).delegate("a","click",function(){var t,i=location.protocol+"//"+location.host;return function(){var n=$(this);
if(!o("aftClkAsyncJumping")&&!(n.attr("sync")||!E.isBaiduboxapp&&!n.attr("async")||n.attr("target")&&"_self"!=n.attr("target"))){var r=$.trim(n.attr("href"));if(r&&0==r.indexOf(i)&&(r=r.substring(i.length)),r&&(t=r.match(/(^|\/)+(s\?.*)/)),r&&t&&t[2]){var c=s.parseUrlParams(t[2]);c.pn||(c.pn=""),c=$.extend({},D,c),c.ts="";var d=e(n,f.param||{},c);return d}a.dispatch("leave")}}}())},init:function(){var e=this;e.supportAsync()&&($("#results>.se-page-ft").length&&($("#results>.se-page-ft,#results>.se-page-ft~*").appendTo(".search-page"),$("#results~style").appendTo("body")),E.isAndroid&&E.isBaiduboxapp&&e.delegateLinkSearch(),B.search.zbios=function(t){return e.zbios(t)
},B.search.bmbadr=function(t){return e.bmbadr(t)},window.addEventListener("baiduboxapp_search",function(t){return e.zbios(t.data)}),page.comm.zvOpen&&E.isBaiduboxapp&&E.boxVersionGreaterEqual("9.1.5")||window.addEventListener("search_baidu",function(t){return e.searchEventHandle(t)}),B.on("init",function(){f.cache&&!f.cache.isPreShow&&(e.setSpeedLogParam(f.param),f.cache.req&&"1"==f.cache.req.mod?e.confirmCache(f.cache,f.param):e.resetLogParam())}),g=new b,E.isBaiduboxapp&&g.setZbiosTcs(),g.initSync(),document.cookie.indexOf("WISEER=1")>-1||C.indexOf("presearch_0")>-1||(E.isSearchCraft?(B.on("ready",function(){e.invokeDeclare()
}),window.addEventListener("pageshow",function(t){t.persisted&&e.invokeDeclare()})):(window.__sam_async||E.boxVersionGreaterEqual("9"))&&(E.isIos?E.boxVersionGreaterEqual("8.5")||E.deviceVersion>=4?e.invokeDeclare():(16==E.boxPresid||17==E.boxPresid)&&e.invokeDeclare():e.invokeDeclare())),B.on("load",function(){f.cache&&!f.cache.isPreShow&&a.invokeApp({state:"30",url:encodeURIComponent(f.cache.redirectUrl)})}),B.on("afterload",function(){f.cache&&!f.cache.isPreShow&&a.invokeApp({state:"40",url:encodeURIComponent(f.cache.redirectUrl)})
}),B.on("afterload",function(){B.comm.query&&0==$(".result,.se-noresult-tips").length?B.cookie("WISEWR","15",{expires:864e5}):B.cookie("WISEWR","",{expires:-1})}))},invokeDeclare:function(){var t=this;e(["superframe/start"],function(){t.invokeApp({state:"10"})})},invokeApp:function(e){E.isBaiduboxappLite&&e&&"10"==e.state||window.Bdbox&&Bdbox.invokeApp&&(Bdbox.invokeApp.android?Bdbox.invokeApp("Bdbox_android_searchFrame","asyncPageState",[JSON.stringify(e)]):Bdbox.invokeApp.ios&&Bdbox.invokeApp("searchFrame",{action:"asyncPageState",params:JSON.stringify(e),minver:"7.5.0.0"},"")),E.isBmbadr&&window._flyflowNative&&_flyflowNative.exec("asyncsearch","state",JSON.stringify(e),null),E.isSearchCraft&&(window.Viaduct&&window.Viaduct.postMessage?window.Viaduct.postMessage(JSON.stringify({func:"asyncSearchState",options:e})):console.log("asyncSearchState",e))
},searchEventHandle:function(e){var t=this;switch(e.key){case"search_submit":var i=s.parseUrlParams(e.params||""),o=(new Date).getTime().toString();i.ts=o.substring(o.length-7),i.word=e.query;var n=new s(i,!0);t.submit(n);break;case"search_input":var i=s.parseUrlParams(e.params||"");t.prefetchInput($.extend(i,{word:e.query,prerender:e.prerender}));break;case"search_cancel":t.cancelPreShow()}},zbios:function(e){var t=this;if(e=e||{},e.type>=0&&e.type<10){if(e.word){g.initAsync(e.param),e.param&&"string"==typeof e.param&&(e.param=s.parseUrlParams(e.param));
var i=(new Date).getTime().toString(),o=$.extend({},D,e.param,{pn:"",word:e.word,tn:"zbios",ts:i.substring(i.length-7)});B.comm.cid&&(o.acid=B.comm.cid),e.word&&delete o.cki,delete o.tcs;var n=new s(o,!0);t.submit(n)}}else if(e.type>=10&&e.type<50&&e.word){e.param&&"string"==typeof e.param&&(e.param=s.parseUrlParams(e.param));var r=$.extend({},D,e.param,{pn:"",tn:"zbios",word:e.word});B.comm.cid&&(r.acid=B.comm.cid),r.word&&delete r.cki,t.prefetchZbios(r,e.type)}else 101==e.type&&t.cancelPreShow()
},bmbadr:function(e){var t=this;if(e=e||{},e.type>=0&&e.type<10){if(e.word){e.param&&"string"==typeof e.param&&(e.param=s.parseUrlParams(e.param));var i=(new Date).getTime().toString(),o=$.extend({},D,e.param,{pn:"",word:e.word,tn:"bmbadr",ts:i.substring(i.length-7)}),n=new s(o,!0);t.submit(n)}}else if(e.type>=10&&e.word){e.param&&"string"==typeof e.param&&(e.param=s.parseUrlParams(e.param));var r=$.extend({},D,e.param,{pn:"",tn:"bmbadr",word:e.word});t.prefetchZbios(r)}}});var M=[];return a}),define("modules/tablink",["require"],function(){function e(){this.currentQuery=decodeURIComponent(window.page&&window.page.comm&&window.page.comm.vsearchQuery||""),this.container=$(".se-head-tablink")
}function t(e,t){this.container=$(".se-head-tablink"),this.container[0]?t!==this.currentQuery&&this.container.replaceWith(e):(this.container=$(e),$(".se-page-hd-content").append(this.container)),this.currentQuery=t}return $.extend(e.prototype,{replaceWith:t}),new e}),define("search/animate",["require","search/search","sfr"],function(e){function t(){var e=a._.get(window,"fif.resultLastRedirectState.scrollTop");e&&scrollTo(0,fif.resultLastRedirectState.scrollTop)}function i(){var e=a._.get(window.page,"comm.sampleval.WISE_TPL_COMMON_SAMPLE_FLAG");
return"aftClkAsyncJumping"!==e?!1:!0}function o(){var e=a._.get(window.page,"comm.sampleval.WISE_TPL_COMMON_SAMPLE_FLAG");return"controlled-result-assf"!==e?!1:!0}function n(){if(i()||o())try{page.log.send({ct:79,cst:5,clk_extra:JSON.stringify({av:1,sa:a._.get(window,"page.comm.sa")})})}catch(e){console.error(e)}}var r=e("search/search"),a=e("sfr"),s=!1;return function(){if(!s&&"object"==typeof page){s=!0;var e,o=$("#page"),c=$(".se-input, .se-encode");r.on("start",function(){if(i()){var n=a.url(location.href),r=!!n.query.get("cq");
r||(o.css({opacity:0}),clearTimeout(e),e=setTimeout(function(){console.warn("`ready` is not triggered after hiding search body for 1200ms. Forced show it."),t(),o.css({opacity:1})},1200))}}),r.on("ready",function(){n(),i()&&(clearTimeout(e),t(),o.animate({opacity:1},120))}),r.on("destroy",function(){if(i()){var e=180,t=240,o=120,n=a.url(location.href),s=n.query.get("word");s!==a._.get(page,"comm.rawQuery")&&(setTimeout(function(){c.css({opacity:1}).animate({opacity:.2},e)},o),setTimeout(function(){r.chgParam(s),c.animate({opacity:1},t)
},o+e))}})}}}),define("superframe/service/indexService",["sfr"],function(e){function t(e,t){return!("/.*\\/s$/"!==e.pathPattern.toString()&&"/^(?!\\/sf_baijiahao).*\\/s$/"!==e.pathPattern.toString()||"/.*\\/s$/"!==t.pathPattern.toString()&&"/^(?!\\/sf_baijiahao).*\\/s$/"!==t.pathPattern.toString()&&"/searchframe"!==t.path)}function i(e){if("undefined"!=typeof Box&&Box.isBox&&Box.os&&Box.os.name&&Box[Box.os.name])if("ios"===Box.os.name){var t={type:"text",query:encodeURIComponent(e)};Box.ios.invokeApp("setquery",{params:JSON.stringify(t),minver:"5.5.0.0"},"")
}else if("android"===Box.os.name){var t={type:"text",query:e};Box.version_compare(Box.version,"9.1.0")>=0&&Box.android.invokeApp("bd_searchbox_interface","setQuery",[e,JSON.stringify(t)])}}function o(){"undefined"!=typeof Box&&Box.version_compare&&Box.version_compare(Box.utils.getVersion(),"9.1.5")>=0&&require(["modules/invoke/invoker"],function(e){e.newInvoker("changetab",{tabtype:"",icon:"https://m.baidu.com/se/static/img/iphone/index.png",hint:"",upgrade:0})})}function n(e){return e&&"/"===e.pathPattern?!0:void 0
}function r(e){return e&&e.path&&("/s"===e.path||"/searchframe"===e.path||e.path.match(/\/s$/))?!0:void 0}var a,s,c="",d=e.service,p=e.action,u=window.page&&page.comm&&page.comm.useNewIs,l={},m=$(['<style id="activitystyle">',".search-page,body .se-page-hd{width:100%;position:absolute;top:-99999px;opacity:0;z-index:-1;}","</style>"].join("")),h=$(['<style id="activitystyle">',".search-page{width:100%;position:absolute;top:-99999px;opacity:0;z-index:-1;}","</style>"].join("")),f=new d;f.name="result",f.getBasePageY=function(){return a
},f.create=function(i,o,d){return l.scrollTop=!1,n(i)&&r(o)?void 0:window.view?(require(["uiamd/bdbox/util"],function(e){e.fullScreen(!1)}),void(i.options&&"sync"===i.options.src?console.error("Unexpected Container"):(location.replace(i.url),location.replace(i.url),location.reload()))):void require(["search/search"],function(n){c?(t(i,o)||require(["uiamd/bdbox/util"],function(e){e.fullScreen(!1)}),u||(s&&s.remove(),s=!1),c===i.url?(n.dispatch("resume",{current:i,prev:o}),n.dispatch("attach",{current:i,prev:o}),scrollTo(0,a)):("/"===o.path?n.indexSearch(i.options.param||i.url):(l.scrollTop=e._.get(i,"page.scrollTop"),d&&d.anchor&&"aftClkAsyncJumping"===e._.get(window.page,"comm.sampleval.WISE_TPL_COMMON_SAMPLE_FLAG")&&(l.dontCache=!0),n.search(i.options.param||i.url),l.dontCache=!1),c=i.url)):(c=i.url,"/"===o.path&&n.indexSearch(i.options.param||i.url))
})},f.attach=function(e,n){u||(s&&s.remove(),s=!1),e&&e.options&&"sync"!==e.options.src&&($(".se-loading-icon").show(),$(".se-tabitem").data("clicked",""),$(".se-tabitem").eq(0).data("clicked","1"),$(".se-tabitem").eq(0).data("current"),(page.comm.query||page.comm.vsearchQuery)&&i(decodeURIComponent((page.comm.query||page.comm.vsearchQuery).replace(/\+/g," "))),o(),t(e,n)||require(["search/search"],function(e){var t="undefined"!=typeof Box&&Box.isBox&&Box.utils&&Box.utils.getVersion()?Box.utils.getVersion():0;
"undefined"!=typeof Box&&Box.isBox&&Box.version_compare&&Box.version_compare(t,"9.1.5")>=0&&(e.invokeApp({state:"20",url:encodeURIComponent(location.href)}),e.invokeApp({state:"30",url:encodeURIComponent(location.href)}),e.invokeApp({state:"40",url:encodeURIComponent(location.href)}))})),$(".search-page, .se-page-hd").removeAttr("style")},f.getContainer=function(){return $(".search-page, .se-page-hd")},f.detach=function(e,o){if(l.scrollTop=!1,$(".se-loading-icon").hide(),n(o)&&r(e));else if(t(e,o)===!1){require(["search/search"],function(t){t.dispatch("detach",{current:e,prev:o})
});var s="undefined"!=typeof Box&&Box.isBox&&Box.utils&&Box.utils.getVersion()?Box.utils.getVersion():0;"undefined"!=typeof Box&&Box.isBox&&Box.version_compare&&(Box.version_compare(s,"9.1.5")<0||Box.version_compare(s,"9.1.5")>=0&&"/sf/vsearch"!==e.path)&&i("")}a=window.scrollY},f.destroy=function(e,i){if(!t(e,i))if(u);else{if(n(e))return void require(["search/search"],function(e){e.recoverIndex()});if(n(i)&&r(e))return;s="/sf/vsearch"===e.pathPattern?h:m,s.appendTo("head")}};var b=function(){};b.prototype=f,b.prototype.constructor=b;
var g=new b,v=new b;v.searchFrame=!0,p.regist(/^(?!\/sf_baijiahao).*\/s$/,g),p.regist(/.*\/searchframe$/,v),p.exist("/")||(p.regist("/",v),"/"===location.pathname&&p.start({root:location.pathname})),window.fif&&(window.fif.resultLastRedirectState=l)}),require(["superframe/service/indexService","sfr"],function(){});